<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Bitfinex API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all_nosearch.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript","go","ruby"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <a href='https://bitfinex.com' title="Bitfinex"><img src="images/logo.png" /></a>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="go">go</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://bitfinex.com'><strong>Back to Bitfinex</strong></a></li>
            <li><a href='https://github.com/bitfinexcom/api_docs'><strong>Documentation Github</strong></a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p>The Bitfinex API&rsquo;s are designed to allow access to all of the features of the Bitfinex platform. The end goal is to
allow people to potentially recreate the entire platform on their own.</p>

<p>If you would like to suggest changes to the documentation, please see the github at https://github.com/bitfinexcom/api_docs</p>

<h2 id="open-source-libraries">Open Source Libraries</h2>

<p>The following open source projects are works in progress. We will be continually improving them, but we want to release them early so that the community can take a look, make use of them, and offer pull requests. Nothing in the Bitcoin world exists in isolation.</p>

<h3 id="go">GO</h3>

<ul>
<li>Library: <a href="https://github.com/bitfinexcom/bitfinex-api-go">bitfinexcom/bitfinex-api-go</a></li>
</ul>

<h3 id="node-js">Node.js</h3>

<ul>
<li>Library: <a href="https://github.com/bitfinexcom/bitfinex-api-node">bitfinexcom/bitfinex-api-node</a></li>
</ul>

<h3 id="ruby">Ruby</h3>

<ul>
<li>Library: <a href="https://github.com/bitfinexcom/bitfinex-api-rb">bitfinexcom/bitfinex-api-rb</a></li>
</ul>

<h2 id="api-access">API Access</h2>

<p>In order to access the parts of the API which require authentication, you must generate an API key and an API secret
using <a href="https://www.bitfinex.com/api">this page</a></p>

<p>You can generate as many API keys as you would like, and each of those keys can be customized in a few ways.</p>

<table class="compact striped" id="api-permissions-table">
      <thead>
        <tr>
          <th style="" class="sortable"><i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
          <th colspan="2" class="col-info center-over-two sortable">Permissions<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
          <th class="sortable"><i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
        </tr>
      </thead>
      <tbody>

          <tr>
            <td>
              <p class="lead-col">
                <strong>Account Info</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_account_read" name="permissions[account][read]" type="checkbox" value="1">
                  <label for="permissions_account_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox show50">
                  <input class="filled-in" disabled="disabled" id="permissions_account" name="permissions[account]" type="checkbox" value="1">
                  <label  for="permissions_account">
                    Write
                  </label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Account History</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_history_read" name="permissions[history][read]" type="checkbox" value="1">
                  <label for="permissions_history_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox show50">
                  <input class="filled-in" disabled="disabled" id="permissions_history" name="permissions[history]" type="checkbox" value="1">
                  <label  for="permissions_history">
                    Write
                  </label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Orders</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_orders_read" name="permissions[orders][read]" type="checkbox" value="1">
                  <label for="permissions_orders_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input class="filled-in" id="permissions_orders_write" name="permissions[orders][write]" type="checkbox" value="1">
                  <label for="permissions_orders_write">Write</label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Margin Trading</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_positions_read" name="permissions[positions][read]" type="checkbox" value="1">
                  <label for="permissions_positions_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input class="filled-in" id="permissions_positions_write" name="permissions[positions][write]" type="checkbox" value="1">
                  <label for="permissions_positions_write">Write</label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Margin Funding</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_funding_read" name="permissions[funding][read]" type="checkbox" value="1">
                  <label for="permissions_funding_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input class="filled-in" id="permissions_funding_write" name="permissions[funding][write]" type="checkbox" value="1">
                  <label for="permissions_funding_write">Write</label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Wallets</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input checked="checked" class="filled-in" id="permissions_wallets_read" name="permissions[wallets][read]" type="checkbox" value="1">
                  <label for="permissions_wallets_read">Read</label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input class="filled-in" id="permissions_wallets_write" name="permissions[wallets][write]" type="checkbox" value="1">
                  <label for="permissions_wallets_write">Write</label>
                </p>
            </td>
            <td></td>
          </tr>
          <tr>
            <td>
              <p class="lead-col">
                <strong>Withdraw</strong>
              </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox show50">
                  <input class="filled-in" disabled="disabled" id="permissions_withdraw" name="permissions[withdraw]" type="checkbox" value="1">
                  <label  for="permissions_withdraw">
                    Read
                  </label>
                </p>
            </td>
            <td class="col-info" style="width:24%;">
                <p class="smaller-checkbox">
                  <input class="filled-in" id="permissions_withdraw_write" name="permissions[withdraw][write]" type="checkbox" value="1">
                  <label for="permissions_withdraw_write">Write</label>
                </p>
            </td>
            <td></td>
          </tr>

      </tbody>
    </table>

          <h1 id="rest">REST</h1>

<h2 id="general">General</h2>

<h3 id="url">URL</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"https://api.bitfinex.com/v1"</span>
</code></pre>
<pre class="highlight go"><code><span class="k">var</span><span class="x"> </span><span class="n">url</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"https://api.bitfinex.com/v1/"</span><span class="x">
</span></code></pre>

<p><code class="prettyprint">https://api.bitfinex.com/v1</code></p>

<h3 id="authentication">Authentication</h3>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/account_infos"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight go"><code><span class="n">payload</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span><span class="x">
    </span><span class="s">"request"</span><span class="o">:</span><span class="x"> </span><span class="s">"/v1/account_infos"</span><span class="p">,</span><span class="x">
    </span><span class="s">"nonce"</span><span class="o">:</span><span class="x">   </span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%v"</span><span class="p">,</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Unix</span><span class="p">()</span><span class="o">*</span><span class="m">10000</span><span class="p">),</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>
<pre class="highlight ruby"><code><span class="c1"># add in your Gemfile</span>
<span class="n">gem</span> <span class="s1">'bitfinex-rb'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">Bitfinex</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">conf</span><span class="o">|</span>
  <span class="n">conf</span><span class="p">.</span><span class="nf">secret</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"BFX_API_SECRET"</span><span class="p">]</span>
  <span class="n">conf</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s2">"BFX_API_KEY"</span><span class="p">]</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">client</span> <span class="o">=</span> <span class="no">Bitfinex</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span>
</code></pre>
<pre class="highlight go"><code><span class="k">import</span><span class="x"> </span><span class="s">"github.com/bitfinexcom/bitfinex-api-go"</span><span class="x">

</span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bitfinex</span><span class="o">.</span><span class="n">NewClient</span><span class="p">()</span><span class="o">.</span><span class="n">Auth</span><span class="p">(</span><span class="n">API_KEY</span><span class="p">,</span><span class="x"> </span><span class="n">API_SECRET</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Authentication is done using an API key and a secret. To generate this pair,
go to the <a href="https://www.bitfinex.com/account/api">API Access</a> page.
As an example of how to authenticate, we can look at the &ldquo;account_infos&rdquo; endpoint.
Take the example payload to the right.</p>

<aside class="warning">
The nonce provided must be strictly increasing.
</aside>
<pre class="highlight javascript"><code><span class="c1">//Using the "request" library, available via npm.</span>
<span class="c1">//From the console, run npm install request</span>
<span class="kd">var</span>
  <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">),</span>
  <span class="nx">api_key</span> <span class="o">=</span> <span class="s2">"&lt;Your API key here&gt;"</span><span class="p">,</span>
  <span class="nx">api_secret</span> <span class="o">=</span> <span class="s2">"&lt;Your API secret here&gt;"</span><span class="p">;</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span>
  <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span>
  <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">),</span>
  <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'X-BFX-APIKEY'</span><span class="p">:</span> <span class="nx">api_key</span><span class="p">,</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/account_infos'</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
  <span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight go"><code><span class="c">// Full example of authenticated request</span><span class="x">
</span><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"crypto/hmac"</span><span class="x">
    </span><span class="s">"crypto/sha512"</span><span class="x">
    </span><span class="s">"encoding/base64"</span><span class="x">
    </span><span class="s">"encoding/hex"</span><span class="x">
    </span><span class="s">"encoding/json"</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
    </span><span class="s">"io/ioutil"</span><span class="x">
    </span><span class="s">"log"</span><span class="x">
    </span><span class="s">"net/http"</span><span class="x">
    </span><span class="s">"time"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">API_KEY</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"..."</span><span class="x">
    </span><span class="n">API_SECRET</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"..."</span><span class="x">

    </span><span class="n">url</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"https://api.bitfinex.com/v1/"</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="n">url</span><span class="o">+</span><span class="s">"/account_infos"</span><span class="p">,</span><span class="x"> </span><span class="no">nil</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">payload</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span><span class="x">
        </span><span class="s">"request"</span><span class="o">:</span><span class="x"> </span><span class="s">"/v1/account_infos"</span><span class="p">,</span><span class="x">
        </span><span class="s">"nonce"</span><span class="o">:</span><span class="x">   </span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%v"</span><span class="p">,</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Unix</span><span class="p">()</span><span class="o">*</span><span class="m">10000</span><span class="p">),</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">payload_json</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span><span class="x">
    </span><span class="n">payload_enc</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">base64</span><span class="o">.</span><span class="n">StdEncoding</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">payload_json</span><span class="p">)</span><span class="x">

    </span><span class="n">sig</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha512</span><span class="o">.</span><span class="n">New384</span><span class="p">,</span><span class="x"> </span><span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="n">API_SECRET</span><span class="p">))</span><span class="x">
    </span><span class="n">sig</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">payload_enc</span><span class="p">))</span><span class="x">

    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"Accept"</span><span class="p">,</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-BFX-APIKEY"</span><span class="p">,</span><span class="x"> </span><span class="n">API_KEY</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-BFX-PAYLOAD"</span><span class="p">,</span><span class="x"> </span><span class="n">payload_enc</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s">"X-BFX-SIGNATURE"</span><span class="p">,</span><span class="x"> </span><span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">)))</span><span class="x">

    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">DefaultClient</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">defer</span><span class="x"> </span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span><span class="x">

    </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">body</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>The authentications procedures is as follows:</p>

<ul>
<li>The payload is the parameters object, first JSON encoded, and then encoded into Base64</li>
</ul>

<p><code class="prettyprint">payload = parameters-object -&gt; JSON encode -&gt; base64</code></p>

<ul>
<li>The signature is the hex digest of an HMAC-SHA384 hash where the message is your payload, and the secret key is your API secret.</li>
</ul>

<p><code class="prettyprint">signature = HMAC-SHA384(payload, api-secret).digest(&#39;hex&#39;)</code></p>

<p><code class="prettyprint">send (api-key, payload, signature)</code></p>

<p>These are encoded as HTTP headers named:</p>

<ul>
<li>X-BFX-APIKEY</li>
<li>X-BFX-PAYLOAD</li>
<li>X-BFX-SIGNATURE</li>
</ul>

<h3 id="parameters">Parameters</h3>

<p>Requests parameters for POST requests (authenticated) (presented below in the &ldquo;Request&rdquo; sections)
are part of the PAYLOAD, not GET parameters.</p>

<p>Requests parameters for GET requests (non-authenticated) are GET parameters,
appended to the URL being called as follows:</p>

<p><code class="prettyprint">/v1/call/?parameter=value</code></p>

<h2 id="public-endpoints">Public Endpoints</h2>
<pre class="highlight javascript"><code><span class="c1">// All examples assume the following:</span>
<span class="c1">// 1. You already have the request object available</span>
<span class="c1">// 2. You have the url variable</span>
<span class="c1">// 3. Will use BTCUSD as the default symbol</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">"https://api.bitfinex.com/v1"</span>
</code></pre>

<aside class="notice">
All Public Endpoints use GET requests
</aside>

<h3 id="ticker">Ticker</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span> <span class="o">+</span> <span class="s2">"/pubticker/:symbol"</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">tick</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">ticker</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"mid"</span><span class="p">:</span><span class="s2">"244.755"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bid"</span><span class="p">:</span><span class="s2">"244.75"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ask"</span><span class="p">:</span><span class="s2">"244.76"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_price"</span><span class="p">:</span><span class="s2">"244.82"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"low"</span><span class="p">:</span><span class="s2">"244.2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"high"</span><span class="p">:</span><span class="s2">"248.19"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"volume"</span><span class="p">:</span><span class="s2">"7842.11542563"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444253422.348340958"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/pubticker/:symbol</code></p>

<p><strong>Description</strong></p>

<p>Gives innermost bid and asks and information on the most recent trade,
as well as high, low and volume of the last 24 hours.</p>

<p><strong>Response Details</strong></p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mid</td>
<td>[price]</td>
<td>(bid + ask) / 2</td>
</tr>
<tr>
<td>bid</td>
<td>[price]</td>
<td>Innermost bid.</td>
</tr>
<tr>
<td>ask</td>
<td>[price]</td>
<td>Innermost ask.</td>
</tr>
<tr>
<td>last_price</td>
<td>[price]</td>
<td>The price at which the last order executed.</td>
</tr>
<tr>
<td>low</td>
<td>[price]</td>
<td>Lowest trade price of the last 24 hours</td>
</tr>
<tr>
<td>high</td>
<td>[price]</td>
<td>Highest trade price of the last 24 hours</td>
</tr>
<tr>
<td>volume</td>
<td>[price]</td>
<td>Trading volume of the last 24 hours</td>
</tr>
<tr>
<td>timestamp</td>
<td>[time]</td>
<td>The timestamp at which this information was valid.</td>
</tr>
</tbody></table>

<h3 id="stats">Stats</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">url</span> <span class="o">+</span> <span class="s2">"/stats/BTCUSD"</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">stats</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">stats</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"volume"</span><span class="p">:</span><span class="s2">"7967.96766158"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span><span class="w">
  </span><span class="nt">"volume"</span><span class="p">:</span><span class="s2">"55938.67260266"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
  </span><span class="nt">"volume"</span><span class="p">:</span><span class="s2">"275148.09653645"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/stats/:symbol</code></p>

<p><strong>Description</strong></p>

<p>Various statistics about the requested pair.</p>

<p><strong>Response Details</strong>
An array of the following:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>period</td>
<td>[integer]</td>
<td>period covered in days</td>
</tr>
<tr>
<td>volume</td>
<td>[price]</td>
<td>volume</td>
</tr>
</tbody></table>

<h3 id="fundingbook">Fundingbook</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"limit_bids"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"limit_asks"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/lendbook/USD'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code> <span class="n">funding_book</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">funding_book</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"bids"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"9.1287"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"5000.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444257541.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"frr"</span><span class="p">:</span><span class="s2">"No"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"asks"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"8.3695"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"407.5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444260343.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"frr"</span><span class="p">:</span><span class="s2">"No"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/lendbook/:currency</code></p>

<p><strong>Description</strong></p>

<p>Get the full margin funding book</p>

<p><strong>Request Details</strong>
<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Required<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Default<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody></p>

<p><tr>
            <td><strong>limit_bids</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the number of funding bids returned. May be 0 in which case the array of bids is empty.</td>
          </tr>
          <tr>
            <td><strong>limit_asks</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the number of funding offers returned. May be 0 in which case the array of asks is empty.</td>
          </tr></p>

<p></tbody>
          </table></p>

<p><strong>Response Details</strong>
<table class>
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody></p>

<p><tr>
            <td><strong>bids</strong></td>
            <td>[array of funding bids]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>rate</strong></td>
            <td>[rate in % per 365 days]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>period</strong></td>
            <td>[days]</td>
            <td>minimum period for the margin funding contract</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>frr</strong></td>
            <td>[yes/no]</td>
            <td>&ldquo;Yes&rdquo; if the offer is at Flash Return Rate, &ldquo;No&rdquo; if the offer is at fixed rate</td>
          </tr>
          <tr>
            <td><strong>asks</strong></td>
            <td>[array of funding offers]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>rate</strong></td>
            <td>[rate in % per 365 days]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>period</strong></td>
            <td>[days]</td>
            <td>maximum period for the funding contract</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>frr</strong></td>
            <td>[yes/no]</td>
            <td>&ldquo;Yes&rdquo; if the offer is at Flash Return Rate, &ldquo;No&rdquo; if the offer is at fixed rate</td>
          </tr>
          </tbody>
          </table></p>

<h3 id="orderbook">Orderbook</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"limit_bids"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"limit_asks"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"group"</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/book/BTCUSD'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">orderbook</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">orderbook</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"bids"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"574.61"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.1439327"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1472506127.0"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"asks"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"574.62"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"19.1334"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1472506126.0"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/book/:symbol</code></p>

<p><strong>Description</strong></p>

<p>Get the full order book.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Required<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Default<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>limit_bids</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the number of bids returned. May be 0 in which case the array of bids is empty.</td>
          </tr>
          <tr>
            <td><strong>limit_asks</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the number of asks returned. May be 0 in which case the array of asks is empty.</td>
          </tr>
          <tr>
            <td><strong>group</strong></td>
            <td>false</td>
            <td>[0/1]</td>
            <td>1</td>
            <td>If 1, orders are grouped by price in the orderbook. If 0, orders are not grouped and sorted individually</td>
          </tr>

          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>
          <tr>
            <td><strong>bids</strong></td>
            <td>[array]</td>
          </tr>
          <tr>
            <td><strong>price</strong></td>
            <td>[price]</td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
          </tr>
          <tr>
            <td><strong>asks</strong></td>
            <td>[array]</td>
          </tr>
          <tr>
            <td><strong>price</strong></td>
            <td>[price]</td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
          </tr>
          </tbody>
          </table>

<h3 id="trades">Trades</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"limit_trades"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/trades/BTCUSD'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">trades</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">trades</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="mi">1444266681</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tid"</span><span class="p">:</span><span class="mi">11988919</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"244.8"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.03297384"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"sell"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/trades/:symbol</code></p>

<p><strong>Description</strong></p>

<p>Get a list of the most recent trades for the given symbol.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Required<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Default<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>timestamp</strong></td>
            <td>false</td>
            <td>[time]</td>
            <td></td>
            <td>Only show trades at or after this timestamp.</td>
          </tr>
          <tr>
            <td><strong>limit_trades</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the number of trades returned. Must be &gt;= 1.</td>
          </tr>

          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>tid</strong></td>
            <td>[integer]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>price</strong></td>
            <td>[price]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>exchange</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>type</strong></td>
            <td>[string]</td>
            <td>&ldquo;sell&rdquo; or &ldquo;buy&rdquo; (can be &ldquo;&rdquo; if undetermined)</td>
          </tr>
          </tbody>
          </table>

<h3 id="lends">Lends</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"limit_lends"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">},</span>
<span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/lends/USD'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">lends</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">lends</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"9.8998"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount_lent"</span><span class="p">:</span><span class="s2">"22528933.77950878"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount_used"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="mi">1444264307</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p>/lends/:currency</p>

<p><strong>Description</strong></p>

<p>Get a list of the most recent funding data for the given currency: total amount provided and Flash Return Rate (in % by 365 days) over time.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Required<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Default<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>timestamp</strong></td>
            <td>false</td>
            <td>[time]</td>
            <td></td>
            <td>Only show data at or after this timestamp.</td>
          </tr>
          <tr>
            <td><strong>limit_lends</strong></td>
            <td>false</td>
            <td>[int]</td>
            <td>50</td>
            <td>Limit the amount of funding data returned. Must be &gt;= 1</td>
          </tr>

          </tbody>
          </table>

<p>*<em>Response Details</em></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>rate</strong></td>
            <td>[decimal, % by 365 days]</td>
            <td>Average rate of total funding received at fixed rates, ie past Flash Return Rate annualized</td>
          </tr>
          <tr>
            <td><strong>amount_lent</strong></td>
            <td>[decimal]</td>
            <td>Total amount of open margin funding in the given currency</td>
          </tr>
          <tr>
            <td><strong>amount_used</strong></td>
            <td>[decimal]</td>
            <td>Total amount of open margin funding used in a margin position in the given currency</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td></td>
          </tr>
          </tbody>
          </table>

<h3 id="symbols">Symbols</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/symbols'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">symbols</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">symbols</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="s2">"ltcusd"</span><span class="p">,</span><span class="s2">"ltcbtc"</span><span class="p">,</span><span class="s2">"ethusd"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ethbtc"</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/symbols</code></p>

<p><strong>Description</strong></p>

<p>Get a list of valid symbol IDs.</p>

<p><strong>Response Details</strong></p>

<p>A list of symbol names. Currently &ldquo;btcusd&rdquo;, &ldquo;ltcusd&rdquo;, &ldquo;ltcbtc&rdquo;, &ldquo;ethusd&rdquo;, &ldquo;ethbtc&rdquo;</p>

<h3 id="symbol-details">Symbol Details</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'/symbols_details'</span><span class="p">,</span>
  <span class="na">qs</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">};</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">symbols_details</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">symbols_details</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">reponse</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price_precision"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"initial_margin"</span><span class="p">:</span><span class="s2">"30.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_margin"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"maximum_order_size"</span><span class="p">:</span><span class="s2">"2000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_order_size"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiration"</span><span class="p">:</span><span class="s2">"NA"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"ltcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price_precision"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"initial_margin"</span><span class="p">:</span><span class="s2">"30.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_margin"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"maximum_order_size"</span><span class="p">:</span><span class="s2">"5000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_order_size"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiration"</span><span class="p">:</span><span class="s2">"NA"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"ltcbtc"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price_precision"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"initial_margin"</span><span class="p">:</span><span class="s2">"30.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_margin"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"maximum_order_size"</span><span class="p">:</span><span class="s2">"5000.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"minimum_order_size"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expiration"</span><span class="p">:</span><span class="s2">"NA"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p>/symbols_details</p>

<p><strong>Description</strong></p>

<p>Get a list of valid symbol IDs and the pair details.</p>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>pair</strong></td>
              <td>[string]</td>
              <td>the pair code</td>
            </tr>
            <tr>
              <td><strong>price_precision</strong></td>
              <td>[integer]</td>
              <td>Maximum number of significant digits for price in this pair</td>
            </tr>
            <tr>
              <td><strong>initial_margin</strong></td>
              <td>[decimal]</td>
              <td>Initial margin required to open a position in this pair</td>
            </tr>
            <tr>
              <td><strong>minimum_margin</strong></td>
              <td>[decimal]</td>
              <td>Minimal margin to maintain (in %)</td>
            </tr>
            <tr>
              <td><strong>maximum_order_size</strong></td>
              <td>[decimal]</td>
              <td>Maximum order size of the pair</td>
            </tr>
            <tr>
              <td><strong>expiration</strong></td>
              <td>[string]</td>
              <td>Expiration date for limited contracts/pairs</td>
            </tr>

            </tbody>
            </table>

<h2 id="authenticated-endpoints">Authenticated Endpoints</h2>
<pre class="highlight javascript"><code><span class="c1">// All examples assume the following:</span>
<span class="c1">// 1. You are using the provided example request object</span>
<span class="c1">// 2. You use your API key and secret</span>
<span class="c1">// 3. BTCUSD is the default symbol</span>
<span class="kd">var</span>
  <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">),</span>
  <span class="nx">api_key</span> <span class="o">=</span> <span class="s2">"&lt;Your API key&gt;"</span><span class="p">,</span>
  <span class="nx">api_secret</span> <span class="o">=</span> <span class="s2">"&lt;Your API secret&gt;"</span><span class="p">,</span>
  <span class="nx">baseRequest</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">defaults</span><span class="p">({</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'X-BFX-APIKEY'</span><span class="p">:</span> <span class="nx">api_key</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">baseUrl</span><span class="p">:</span> <span class="s2">"https://api.bitfinex.com/v1"</span>
  <span class="p">});</span>
</code></pre>

<aside class="notice">
All Authenticated Endpoints use POST requests
</aside>

<h3 id="account-info">Account Info</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/account_infos"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/account_infos"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">account_info</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"maker_fees"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"taker_fees"</span><span class="p">:</span><span class="s2">"0.2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fees"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"pairs"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maker_fees"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"taker_fees"</span><span class="p">:</span><span class="s2">"0.2"</span><span class="w">
   </span><span class="p">},{</span><span class="w">
    </span><span class="nt">"pairs"</span><span class="p">:</span><span class="s2">"LTC"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maker_fees"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"taker_fees"</span><span class="p">:</span><span class="s2">"0.2"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
    </span><span class="nt">"pairs"</span><span class="p">:</span><span class="s2">"DRK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maker_fees"</span><span class="p">:</span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"taker_fees"</span><span class="p">:</span><span class="s2">"0.2"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/account_infos</code></p>

<p><strong>Description</strong></p>

<p>Return information about your account (trading fees).</p>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>pairs</strong></td>
            <td>[string]</td>
            <td>The currency included in the pairs with this fee schedule</td>
          </tr>
          <tr>
            <td><strong>maker_fees</strong></td>
            <td>[decimal]</td>
            <td>Your current fees for maker orders (limit orders not marketable, in percent)</td>
          </tr>
          <tr>
            <td><strong>taker_fees</strong></td>
            <td>[decimal]</td>
            <td>Your current fees for taker orders (marketable order, in percent)</td>
          </tr>

          </tbody>
          </table>

<h3 id="summary">Summary</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/summary"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/summary"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">}</span>
  <span class="nl">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">}</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">summary</span>
</code></pre>
<pre class="highlight javascript"><code><span class="c1">//response</span>
<span class="p">{</span>
  <span class="s2">"trade_vol_30d"</span><span class="err">:</span><span class="p">[</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="s2">"vol"</span><span class="p">:</span><span class="mf">11.88696022</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"LTC"</span><span class="p">,</span><span class="s2">"vol"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="s2">"vol"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"Total (USD)"</span><span class="p">,</span><span class="s2">"vol"</span><span class="p">:</span><span class="mf">5027.63</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"funding_profit_30d"</span><span class="err">:</span><span class="p">[</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"LTC"</span><span class="p">,</span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">"curr"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="p">,</span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"maker_fee"</span><span class="err">:</span><span class="mf">0.001</span><span class="p">,</span>
  <span class="s2">"taker_fee"</span><span class="err">:</span><span class="mf">0.002</span>
<span class="p">}</span>
</code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/summary</code></p>

<p><strong>Description</strong></p>

<p>Returns a 30-day summary of your trading volume and return on margin funding</p>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>trade_vol_30d</strong></td>
            <td>[string]</td>
            <td>Trading volumes for any currency for the last 30 days</td>
          </tr>
          <tr>
            <td><strong>funding_profit_30d</strong></td>
            <td>[string]</td>
            <td>Funding profits for any currency for the last 30 days</td>
          </tr>
          <tr>
            <td><strong>maker_fees</strong></td>
            <td>[decimal]</td>
            <td>Your current fees for maker orders (limit orders not marketable, in percent)</td>
          </tr>
          <tr>
            <td><strong>taker_fees</strong></td>
            <td>[decimal]</td>
            <td>Your current fees for taker orders (marketable order, in percent)</td>
          </tr>

          </tbody>
          </table>

<h3 id="deposit">Deposit</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/deposit/new"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"method"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"wallet_name"</span><span class="p">:</span> <span class="s2">"exchange"</span><span class="p">,</span>
  <span class="s2">"renew"</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/deposit/new"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">new_address</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">deposit</span><span class="p">(</span><span class="s2">"bitcoin"</span><span class="p">,</span> <span class="s2">"exchange"</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"result"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"bitcoin"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"1A2wyHKJ4KWEoahDHVxwQy3kdd6g1qiSYV"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/deposit/new</code></p>

<p><strong>Description</strong></p>

<p>Return your deposit address to make a new deposit.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>method</strong></td>
            <td>[string]</td>
            <td>Method of deposit (methods accepted: &ldquo;bitcoin&rdquo;, &ldquo;litecoin&rdquo;, &ldquo;ethereum&rdquo;, &ldquo;mastercoin&rdquo; (tethers)).</td>
          </tr>
          <tr>
            <td><strong>wallet_name</strong></td>
            <td>[string]</td>
            <td>Wallet to deposit in (accepted: &ldquo;trading&rdquo;, &ldquo;exchange&rdquo;, &ldquo;deposit&rdquo;). Your wallet needs to already exist</td>
          </tr>
          <tr>
            <td><strong>renew</strong></td>
            <td>[integer]</td>
            <td>(optional) Default is 0. If set to 1, will return a new unused deposit address</td>
          </tr>

          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>result</strong></td>
            <td>[string]</td>
            <td>&ldquo;success&rdquo; or &ldquo;error&rdquo;</td>
          </tr>
          <tr>
            <td><strong>method</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>address</strong></td>
            <td>[string]</td>
            <td>The deposit address (or error message if result = &ldquo;error&rdquo;)</td>
          </tr>

          </tbody>
          </table>

<h3 id="orders">Orders</h3>

<h4 id="new-order">New Order</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/new"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"symbol"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span>
  <span class="s2">"price"</span><span class="p">:</span> <span class="s2">"0.01"</span><span class="p">,</span>
  <span class="s2">"exchange"</span><span class="p">:</span> <span class="s2">"bitfinex"</span><span class="p">,</span>
  <span class="s2">"side"</span><span class="p">:</span> <span class="s2">"buy"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"exchange limit"</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/new"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">new_order</span><span class="p">(</span><span class="s2">"usdbtc"</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">"market"</span><span class="p">,</span> <span class="s2">"sell"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448364249</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444272165.252370982"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"order_id"</span><span class="p">:</span><span class="mi">448364249</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/new</code></p>

<p><strong>Description</strong></p>

<p>Submit a new order.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>symbol</strong></td>
              <td>[string]</td>
              <td>The name of the symbol (see `/symbols`).</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>Order size: how much to buy or sell.</td>
            </tr>
            <tr>
              <td><strong>price</strong></td>
              <td>[price]</td>
              <td>Price to buy or sell at. Must be positive. Use random number for market orders.</td>
            </tr>
            <tr>
              <td><strong>exchange</strong></td>
              <td>[string]</td>
              <td>&ldquo;bitfinex&rdquo;</td>
            </tr>
            <tr>
              <td><strong>side</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;buy&rdquo; or &ldquo;sell&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>type</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;market&rdquo; / &ldquo;limit&rdquo; / &ldquo;stop&rdquo; / &ldquo;trailing-stop&rdquo; / &ldquo;fill-or-kill&rdquo; / &ldquo;exchange market&rdquo; / &ldquo;exchange limit&rdquo; / &ldquo;exchange stop&rdquo; / &ldquo;exchange trailing-stop&rdquo; / &ldquo;exchange fill-or-kill&rdquo;. (type starting by &ldquo;exchange &rdquo; are exchange orders, others are margin trading orders)</td>
            </tr>
            <tr>
              <td><strong>is_hidden</strong></td>
              <td>[bool]</td>
              <td>true if the order should be hidden. Default is false.</td>
            </tr>
            <tr>
              <td><strong>is_postonly</strong></td>
              <td>[bool]</td>
              <td>true if the order should be post only. Default is false. Only relevant for limit orders.</td>
            </tr>
            <tr>
              <td><strong>use_all_available</strong></td>
              <td>[int]</td>
              <td>Optional. default is 0. 1 will post an order that will use all of your available balance.</td>
            </tr>
            <tr>
              <td><strong>ocoorder</strong></td>
              <td>[bool]</td>
              <td>Set an additional STOP OCO order that will be linked with the current order.</td>
            </tr>
            <tr>
              <td><strong>buy_price_oco</strong></td>
              <td>[price]</td>
              <td>If ocoorder is true, this field represent the price of the OCO stop order to place</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_id</strong></td>
              <td>[int]</td>
              <td>An order object containing the order&rsquo;s ID as well as all the information provided by /order/status</td>
            </tr>
            </tbody>
            </table>

<p><strong>Order Types</strong></p>

<table class="striped">
              <thead>
              <tr>
                <th class="sortable">Margin trading type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Exchange type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>LIMIT</td>
                <td>EXCHANGE LIMIT</td>
              </tr>
              <tr>
                <td>MARKET</td>
                <td>EXCHANGE MARKET</td>
              </tr>
              <tr>
                <td>STOP</td>
                <td>EXCHANGE STOP</td>
              </tr>
              <tr>
                <td>TRAILING STOP</td>
                <td>EXCHANGE TRAILING STOP</td>
              </tr>
                  <tr>
                    <td>FILL-OR-KILL</td>
                    <td>EXCHANGE FILL-OR-KILL</td>
                  </tr>
              </tbody>
            </table>

<h4 id="multiple-new-orders">Multiple new orders</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/new/multi"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"orders"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">"symbol"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"0.01"</span><span class="p">,</span>
    <span class="s2">"price"</span><span class="p">:</span> <span class="s2">"0.01"</span><span class="p">,</span>
    <span class="s2">"exchange"</span><span class="p">:</span> <span class="s2">"bitfinex"</span><span class="p">,</span>
    <span class="s2">"side"</span><span class="p">:</span> <span class="s2">"buy"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"exchange limit"</span>
  <span class="p">},{</span>
    <span class="s2">"symbol"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"0.02"</span><span class="p">,</span>
    <span class="s2">"price"</span><span class="p">:</span> <span class="s2">"0.03"</span><span class="p">,</span>
    <span class="s2">"exchange"</span><span class="p">:</span> <span class="s2">"bitfinex"</span><span class="p">,</span>
    <span class="s2">"side"</span><span class="p">:</span> <span class="s2">"buy"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"exchange limit"</span>
  <span class="p">}]</span>
<span class="p">};</span>

<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/new/multi"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
        <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
    <span class="p">},</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">multiple_orders</span><span class="p">([{</span><span class="ss">symbol: </span><span class="s2">"btcusd"</span><span class="p">,</span> <span class="ss">amount: </span><span class="mi">10</span><span class="p">,</span> <span class="ss">price: </span><span class="mi">0</span><span class="p">,</span> <span class="ss">exchange: </span><span class="s2">"bitfinex"</span><span class="p">,</span> <span class="ss">side: </span><span class="s2">"buy"</span><span class="p">,</span> <span class="ss">type: </span><span class="s2">"market"</span><span class="p">}])</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"order_ids"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448383727</span><span class="p">,</span><span class="w">
    </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444274013.621701916"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448383729</span><span class="p">,</span><span class="w">
    </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.03"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444274013.661297306"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/new/multi</code></p>

<p><strong>Description</strong></p>

<p>Submit several new orders at once.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>symbol</strong></td>
              <td>[string]</td>
              <td>The name of the symbol (see `/symbols`).</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>Order size: how much to buy or sell.</td>
            </tr>
            <tr>
              <td><strong>price</strong></td>
              <td>[price]</td>
              <td>Price to buy or sell at. May omit if a market order.</td>
            </tr>
            <tr>
              <td><strong>exchange</strong></td>
              <td>[string]</td>
              <td>&ldquo;bitfinex&rdquo;, &ldquo;bitstamp&rdquo;, &ldquo;all&rdquo; (for no routing).</td>
            </tr>
            <tr>
              <td><strong>side</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;buy&rdquo; or &ldquo;sell&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>type</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;market&rdquo; / &ldquo;limit&rdquo; / &ldquo;stop&rdquo; / &ldquo;trailing-stop&rdquo; / &ldquo;fill-or-kill&rdquo;.</td>
            </tr>

            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_ids</strong></td>
              <td>[array]</td>
              <td>An array of order objects each having their own unique ID, as well as the information given by /order/status for each of the orders opened.</td>
            </tr>
            </tbody>
            </table>

<h4 id="cancel-order">Cancel order</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/cancel"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="mi">448364249</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/cancel"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">cancel_orders</span><span class="p">(</span><span class="mi">448364249</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">446915287</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"239.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"trailing stop"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444141982.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/cancel</code></p>

<p><strong>Description</strong></p>

<p>Cancel an order.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_id</strong></td>
              <td>[int]</td>
              <td>The order ID given by `/order/new`.</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<p>Result of /order/status for the cancelled order.</p>

<h4 id="cancel-multiple-orders">Cancel multiple orders</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/cancel/multi"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"order_ids"</span><span class="p">:</span> <span class="p">[</span><span class="mi">448402101</span><span class="p">,</span> <span class="mi">448402099</span><span class="p">]</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/cancel/multi"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">cancel_orders</span><span class="p">([</span><span class="mi">448402101</span><span class="p">,</span> <span class="mi">448402099</span><span class="p">])</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="nt">"result"</span><span class="p">:</span><span class="s2">"Orders cancelled"</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/cancel/multi</code></p>

<p><strong>Description</strong></p>

<p>Cancel multiples orders at once.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_ids</strong></td>
              <td>[array]</td>
              <td>An array of the order IDs given by `/order/new` or `/order/new/multi`</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<p>Confirmation of cancellation of the orders.</p>

<h4 id="cancel-all-orders">Cancel all orders</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/cancel/all"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/cancel/all"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">cancel_orders</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="nt">"result"</span><span class="p">:</span><span class="s2">"All orders cancelled"</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/cancel/all</code></p>

<p><strong>Description</strong></p>

<p>Cancel all active orders at once.</p>

<p><strong>Request Details</strong></p>

<p>No arguments required</p>

<p><strong>Response Details</strong></p>

<p>Confirmation of cancellation of the orders.</p>

<h4 id="replace-order">Replace order</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="mi">448411153</span><span class="p">,</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/cancel/replace"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"symbol"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span>
  <span class="s2">"price"</span><span class="p">:</span> <span class="s2">"0.02"</span><span class="p">,</span>
  <span class="s2">"exchange"</span><span class="p">:</span> <span class="s2">"bitfinex"</span><span class="p">,</span>
  <span class="s2">"side"</span><span class="p">:</span> <span class="s2">"buy"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"exchange limit"</span><span class="p">,</span>
  <span class="s2">"use_remaining"</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/cancel/replace"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">replace_order</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="s2">"usdbtc"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"market"</span><span class="p">,</span> <span class="s2">"buy"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448411365</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444276597.691580782"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"order_id"</span><span class="p">:</span><span class="mi">448411365</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/cancel/replace</code></p>

<p><strong>Description</strong></p>

<p>Replace an orders with a new one.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_id</strong></td>
              <td>[int]</td>
              <td>The order ID (to be replaced) given by `/order/new`.</td>
            </tr>
            <tr>
              <td><strong>symbol</strong></td>
              <td>[string]</td>
              <td>The name of the symbol (see `/symbols`).</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>Order size: how much to buy or sell.</td>
            </tr>
            <tr>
              <td><strong>price</strong></td>
              <td>[price]</td>
              <td>Price to buy or sell at. May omit if a market order.</td>
            </tr>
            <tr>
              <td><strong>exchange</strong></td>
              <td>[string]</td>
              <td>&ldquo;bitfinex&rdquo;, &ldquo;bitstamp&rdquo;, &ldquo;all&rdquo; (for no routing).</td>
            </tr>
            <tr>
              <td><strong>side</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;buy&rdquo; or &ldquo;sell&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>type</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;market&rdquo; / &ldquo;limit&rdquo; / &ldquo;stop&rdquo; / &ldquo;trailing-stop&rdquo; / &ldquo;fill-or-kill&rdquo; / &ldquo;exchange market&rdquo; / &ldquo;exchange limit&rdquo; / &ldquo;exchange stop&rdquo; / &ldquo;exchange trailing-stop&rdquo; / &ldquo;exchange fill-or-kill&rdquo;. (type starting by &ldquo;exchange &rdquo; are exchange orders, others are margin trading orders)</td>
            </tr>
            <tr>
              <td><strong>is_hidden</strong></td>
              <td>[bool]</td>
              <td>true if the order should be hidden. Default is false.</td>
            </tr>
            <tr>
              <td><strong>use_remaining</strong></td>
              <td>[bool]</td>
              <td>True if the new order should use the remaining amount of the original order. Default is false</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_id</strong></td>
              <td>[int]</td>
              <td>A randomly generated ID for the order and the information given by /order/status.</td>
            </tr>
            </tbody>
            </table>

<h4 id="order-status">Order status</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"order_id"</span><span class="p">:</span> <span class="mi">448411153</span><span class="p">,</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/order/status"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/order/status"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">order_status</span><span class="p">(</span><span class="mi">448411153</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448411153</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444276570.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"oco_order"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/order/status</code></p>

<p><strong>Description</strong></p>

<p>Get the status of an order. Is it active? Was it cancelled? To what extent has it been executed? etc.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>order_id</strong></td>
              <td>[int]</td>
              <td>The order ID given by `/order/new`</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>symbol</strong></td>
              <td>[string]</td>
              <td>The symbol name the order belongs to.</td>
            </tr>
            <tr>
              <td><strong>exchange</strong></td>
              <td>[string]</td>
              <td>&ldquo;bitfinex&rdquo;, &ldquo;bitstamp&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>price</strong></td>
              <td>[decimal]</td>
              <td>The price the order was issued at (can be null for market orders).</td>
            </tr>
            <tr>
              <td><strong>avg_execution_price</strong></td>
              <td>[decimal]</td>
              <td>The average price at which this order as been executed so far. 0 if the order has not been executed at all.</td>
            </tr>
            <tr>
              <td><strong>side</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;buy&rdquo; or &ldquo;sell&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>type</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;market&rdquo; / &ldquo;limit&rdquo; / &ldquo;stop&rdquo; / &ldquo;trailing-stop&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>timestamp</strong></td>
              <td>[time]</td>
              <td>The timestamp the order was submitted.</td>
            </tr>
            <tr>
              <td><strong>is_live</strong></td>
              <td>[bool]</td>
              <td>Could the order still be filled?</td>
            </tr>
            <tr>
              <td><strong>is_cancelled</strong></td>
              <td>[bool]</td>
              <td>Has the order been cancelled?</td>
            </tr>
            <tr>
              <td><strong>is_hidden</strong></td>
              <td>[bool]</td>
              <td>Is the order hidden?</td>
            </tr>
            <tr>
              <td><strong>oco_order</strong></td>
              <td>[integer]</td>
              <td>If the order is an OCO order, the ID of the linked order. Otherwise, null</td>
            </tr>
            <tr>
              <td><strong>was_forced</strong></td>
              <td>[bool]</td>
              <td>For margin only true if it was forced by the system.</td>
            </tr>
            <tr>
              <td><strong>executed_amount</strong></td>
              <td>[decimal]</td>
              <td>How much of the order has been executed so far in its history?</td>
            </tr>
            <tr>
              <td><strong>remaining_amount</strong></td>
              <td>[decimal]</td>
              <td>How much is still remaining to be submitted?</td>
            </tr>
            <tr>
              <td><strong>original_amount</strong></td>
              <td>[decimal]</td>
              <td>What was the order originally submitted for?</td>
            </tr>

            </tbody>
            </table>

<h4 id="active-orders">Active orders</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/orders"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/orders"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">orders</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">448411365</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"avg_execution_price"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"side"</span><span class="p">:</span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange limit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444276597.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_hidden"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"was_forced"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/orders</code></p>

<p><strong>Description</strong></p>

<p>View your active orders.</p>

<p><strong>Response Details</strong></p>

<p>An array of the results of <code class="prettyprint">/order/status</code> for all your live orders.</p>

<h3 id="positions">Positions</h3>

<h4 id="active-positions">Active Positions</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/positions"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/positions"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">positions</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">943715</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"base"</span><span class="p">:</span><span class="s2">"246.94"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444141857.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"swap"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pl"</span><span class="p">:</span><span class="s2">"-2.22042"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/positions</code></p>

<p><strong>Description</strong></p>

<p>View your active positions.</p>

<p><strong>Response Details</strong></p>

<p>An array of your active positions.</p>

<h4 id="claim-position">Claim position</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/position/claim"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"position_id"</span><span class="p">:</span> <span class="mi">943715</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/position/claim"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">client</span><span class="p">.</span><span class="nf">claim_position</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">943715</span><span class="p">,</span><span class="w">
  </span><span class="nt">"symbol"</span><span class="p">:</span><span class="s2">"btcusd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"base"</span><span class="p">:</span><span class="s2">"246.94"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444141857.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"swap"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pl"</span><span class="p">:</span><span class="s2">"-2.2304"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/position/claim</code></p>

<p><strong>Description</strong></p>

<p>A position can be claimed if:</p>

<p>It is a long position: The amount in the last unit of the position pair that you have in your trading wallet
AND/OR the realized profit of the position is greater or equal to the purchase amount of the position
(base price * position amount) and the funds which need to be returned. For example, for a long BTCUSD position,
you can claim the position if the amount of USD you have in the trading wallet is greater than the base price * the
position amount and the funds used.</p>

<p>It is a short position: The amount in the first unit of the position pair that you have in your trading wallet is
greater or equal to the amount of the position and the margin funding used.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>position_id</strong></td>
              <td>[int]</td>
              <td>The position ID given by `/positions`.</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>The partial amount you wish to claim</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<p>Status of the position for the claimed position, if the position could be claimed.</p>

<h3 id="historical-data">Historical Data</h3>

<h4 id="balance-history">Balance History</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/history"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="s2">"limit"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/history"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">history</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"-246.94"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"balance"</span><span class="p">:</span><span class="s2">"515.4476526"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Position claimed @ 245.2 on wallet trading"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444277602.0"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/history</code></p>

<p><strong>Description</strong></p>

<p>View all of your balance ledger entries.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td>The currency to look for.</td>
          </tr>
          <tr>
            <td><strong>since</strong></td>
            <td>[time]</td>
            <td>Optional. Return only the history after this timestamp.</td>
          </tr>
          <tr>
            <td><strong>until</strong></td>
            <td>[time]</td>
            <td>Optional. Return only the history before this timestamp.</td>
          </tr>
          <tr>
            <td><strong>limit</strong></td>
            <td>[int]</td>
            <td>Optional. Limit the number of entries to return. Default is 500.</td>
          </tr>
          <tr>
            <td><strong>wallet</strong></td>
            <td>[string]</td>
            <td>Optional. Return only entries that took place in this wallet. Accepted inputs are: &ldquo;trading&rdquo;, &ldquo;exchange&rdquo;, &ldquo;deposit&rdquo;.</td>
          </tr>
          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td>Currency</td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td>Positive (credit) or negative (debit)</td>
          </tr>
          <tr>
            <td><strong>balance</strong></td>
            <td>[decimal]</td>
            <td>Wallet balance after the current entry</td>
          </tr>
          <tr>
            <td><strong>description</strong></td>
            <td>[string]</td>
            <td>Description of the entry. Includes the wallet in which the operation took place</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td>Timestamp of the entry</td>
          </tr>

          </tbody>
          </table>

<h4 id="deposit-withdrawal-history">Deposit-Withdrawal History</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/history/movements"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"BTC"</span><span class="p">,</span>
  <span class="s2">"limit"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/history/movements"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">reponse</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">movements</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">581183</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"method"</span><span class="p">:</span><span class="s2">"BITCOIN"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"WITHDRAWAL"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">".01"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"3QXYWgRGX2BPYBpUDBssGbeWEa5zq6snBZ, offchain transfer "</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="s2">"3QXYWgRGX2BPYBpUDBssGbeWEa5zq6snBZ"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"COMPLETED"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1443833327.0"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/history/movements</code></p>

<p><strong>Description</strong></p>

<p>View your past deposits/withdrawals.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td>The currency to look for.</td>
          </tr>
          <tr>
            <td><strong>method</strong></td>
            <td>[string]</td>
            <td>Optional. The method of the deposit/withdrawal (can be &ldquo;bitcoin&rdquo;, &ldquo;litecoin&rdquo;, &ldquo;darkcoin&rdquo;, &ldquo;wire&rdquo;).</td>
          </tr>
          <tr>
            <td><strong>since</strong></td>
            <td>[time]</td>
            <td>Optional. Return only the history after this timestamp.</td>
          </tr>
          <tr>
            <td><strong>until</strong></td>
            <td>[time]</td>
            <td>Optional. Return only the history before this timestamp.</td>
          </tr>
          <tr>
            <td><strong>limit</strong></td>
            <td>[int]</td>
            <td>Optional. Limit the number of entries to return. Default is 500.</td>
          </tr>
          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<p>An array of histories</p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>method</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>type</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td>Absolute value of the movement</td>
          </tr>
          <tr>
            <td><strong>description</strong></td>
            <td>[string]</td>
            <td>Description of the movement (txid, destination address,,,,)</td>
          </tr>
          <tr>
            <td><strong>address</strong></td>
            <td>[string]</td>
            <td>Deposit address used or withdrawal destination address</td>
          </tr>
          <tr>
            <td><strong>status</strong></td>
            <td>[string]</td>
            <td>Status of the movement</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td>Timestamp of the movement</td>
          </tr>

          </tbody>
          </table>

<h4 id="past-trades">Past Trades</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/mytrades"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"symbol"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
  <span class="s2">"limit_trades"</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/mytrades"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">mytrades</span>
</code></pre>

<blockquote>
<p><strong>Response</strong></p>
</blockquote>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="s2">"246.94"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444141857.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exchange"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"Buy"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fee_currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"fee_amount"</span><span class="p">:</span><span class="s2">"-0.49388"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tid"</span><span class="p">:</span><span class="mi">11970839</span><span class="p">,</span><span class="w">
  </span><span class="nt">"order_id"</span><span class="p">:</span><span class="mi">446913929</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/mytrades</code></p>

<p><strong>Description</strong></p>

<p>View your past trades.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>symbol</strong></td>
            <td>[string]</td>
            <td>The pair traded (BTCUSD, &hellip;).</td>
          </tr>
          <tr>
            <td><strong>timestamp</strong></td>
            <td>[time]</td>
            <td>Trades made before this timestamp won&rsquo;t be returned.</td>
          </tr>
          <tr>
            <td><strong>until</strong></td>
            <td>[time]</td>
            <td>Optional. Trades made after this timestamp won&rsquo;t be returned.</td>
          </tr>
          <tr>
            <td><strong>limit_trades</strong></td>
            <td>[int]</td>
            <td>Optional. Limit the number of trades returned. Default is 50.</td>
          </tr>
          <tr>
            <td><strong>reverse</strong></td>
            <td>[int]</td>
            <td>Optional. Return trades in reverse order (the oldest comes first). Default is returning newest trades first.</td>
          </tr>
          </tbody>
          </table>

<p><strong>Response Details</strong></p>

<p>An array of trades</p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>price</strong></td>
            <td>[price]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>exchange</strong></td>
            <td>[string]</td>
            <td></td>
          </tr>
          <tr>
            <td><strong>type</strong></td>
            <td>[string]</td>
            <td>Sell or Buy</td>
          </tr>
          <tr>
            <td><strong>fee_currency</strong></td>
            <td>[string]</td>
            <td>Currency you paid this trade&rsquo;s fee in</td>
          </tr>
          <tr>
            <td><strong>fee_amount</strong></td>
            <td>[decimal]</td>
            <td>Amount of fees you paid for this trade</td>
          </tr>
          <tr>
            <td><strong>tid</strong></td>
            <td>[integer]</td>
            <td>unique identification number of the trade</td>
          </tr>
          <tr>
            <td><strong>order_id</strong></td>
            <td>[integer]</td>
            <td>unique identification number of the parent order of the trade</td>
          </tr>

          </tbody>
          </table>

<h3 id="margin-funding">Margin Funding</h3>

<h4 id="new-offer">New Offer</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/offer/new"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"50.00"</span><span class="p">,</span>
  <span class="s2">"rate"</span><span class="p">:</span> <span class="s2">"20"</span><span class="p">,</span>
  <span class="s2">"period"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"direction"</span><span class="p">:</span> <span class="s2">"lend"</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/offer/new"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">new_offer</span><span class="p">(</span><span class="s2">"btc"</span><span class="p">,</span> <span class="mi">10</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">365</span><span class="p">,</span> <span class="s2">"lend"</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">13800585</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"20.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"direction"</span><span class="p">:</span><span class="s2">"lend"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444279698.21175971"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"offer_id"</span><span class="p">:</span><span class="mi">13800585</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/offer/new</code></p>

<p><strong>Description</strong></p>

<p>Submit a new offer.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>currency</strong></td>
              <td>[string]</td>
              <td>The name of the currency.</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>Offer size: how much to lend or borrow.</td>
            </tr>
            <tr>
              <td><strong>rate</strong></td>
              <td>[decimal]</td>
              <td>Rate to lend or borrow at. <b>In percentage per 365 days</b>. (Set to 0 for FRR).</td>
            </tr>
            <tr>
              <td><strong>period</strong></td>
              <td>[integer]</td>
              <td>Number of days of the funding contract (in days)</td>
            </tr>
            <tr>
              <td><strong>direction</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;lend&rdquo; or &ldquo;loan&rdquo;.</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>id</strong></td>
              <td>[int]</td>
              <td>A randomly generated ID for the offer and the information given by /offer/status</td>
            </tr>
            <tr>
              <td><strong>currency</strong></td>
              <td>[string]</td>
              <td>The name of the currency.</td>
            </tr>
            <tr>
              <td><strong>rate</strong></td>
              <td>[decimal]</td>
              <td>Rate to lend or borrow at. <b>In percentage per 365 days</b>. (Set to 0 for FRR).</td>
            </tr>
            <tr>
              <td><strong>period</strong></td>
              <td>[integer]</td>
              <td>Number of days of the funding contract (in days)</td>
            </tr>
            <tr>
              <td><strong>direction</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;lend&rdquo; or &ldquo;loan&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>is_live</strong></td>
              <td>[bool]</td>
              <td>Could the offer still be filled?</td>
            </tr>
            <tr>
              <td><strong>is_cancelled</strong></td>
              <td>[bool]</td>
              <td>Has the offer been cancelled?</td>
            </tr>
            <tr>
              <td><strong>executed_amount</strong></td>
              <td>[decimal]</td>
              <td>How much of the offer has been executed so far in its history?</td>
            </tr>
            <tr>
              <td><strong>remaining_amount</strong></td>
              <td>[decimal]</td>
              <td>How much is still remaining to be submitted?</td>
            </tr>
            <tr>
              <td><strong>original_amount</strong></td>
              <td>[decimal]</td>
              <td>What was the offer originally submitted for?</td>
            </tr>

            </tbody>
            </table>

<h4 id="cancel-offer">Cancel Offer</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/offer/cancel"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"offer_id"</span><span class="p">:</span> <span class="mi">13800585</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/offer/cancel"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">cancel_offer</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">13800585</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"20.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"direction"</span><span class="p">:</span><span class="s2">"lend"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444279698.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/offer/cancel</code></p>

<p><strong>Description</strong></p>

<p>Cancel an offer.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>offer_id</strong></td>
              <td>[int]</td>
              <td>The offer ID given by `/offer/new`.</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<p>Result of /offer/status for the cancelled offer.</p>

<h4 id="offer-status">Offer Status</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/offer/status"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"offer_id"</span><span class="p">:</span> <span class="mi">13800585</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/offer/status"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">offer_status</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">13800585</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"20.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"direction"</span><span class="p">:</span><span class="s2">"lend"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444279698.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/offer/status</code></p>

<p><strong>Description</strong></p>

<p>Get the status of an offer. Is it active? Was it cancelled? To what extent has it been executed? etc.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>offer_id</strong></td>
              <td>[int]</td>
              <td>The offer ID given by `/offer/new`.</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>currency</strong></td>
              <td>[string]</td>
              <td>The currency name of the offer.</td>
            </tr>
            <tr>
              <td><strong>rate</strong></td>
              <td>[decimal]</td>
              <td>The rate the offer was issued at (in % per 365 days).</td>
            </tr>
            <tr>
              <td><strong>period</strong></td>
              <td>[integer]</td>
              <td>The number of days of the offer.</td>
            </tr>
            <tr>
              <td><strong>direction</strong></td>
              <td>[string]</td>
              <td>Either &ldquo;lend&rdquo; or &ldquo;loan&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>timestamp</strong></td>
              <td>[time]</td>
              <td>The timestamp the offer was submitted.</td>
            </tr>
            <tr>
              <td><strong>is_live</strong></td>
              <td>[bool]</td>
              <td>Could the offer still be filled?</td>
            </tr>
            <tr>
              <td><strong>is_cancelled</strong></td>
              <td>[bool]</td>
              <td>Has the offer been cancelled?</td>
            </tr>
            <tr>
              <td><strong>executed_amount</strong></td>
              <td>[decimal]</td>
              <td>How much of the offer has been executed so far in its history?</td>
            </tr>
            <tr>
              <td><strong>remaining_amount</strong></td>
              <td>[decimal]</td>
              <td>How much is still remaining to be submitted?</td>
            </tr>
            <tr>
              <td><strong>original_amount</strong></td>
              <td>[decimal]</td>
              <td>What was the offer originally submitted for?</td>
            </tr>

            </tbody>
            </table>

<h4 id="active-credits">Active Credits</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/credits"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/credits"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
<span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">credits</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">13800719</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"31.39"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"direction"</span><span class="p">:</span><span class="s2">"lend"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444280237.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/credits</code></p>

<p><strong>Description</strong></p>

<p>View your funds currently taken (active credits).</p>

<p><strong>Response Details</strong></p>

<p>An array of your active credits</p>

<h4 id="offers">Offers</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/offers"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/offers"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
<span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">offers</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">13800719</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"31.39"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"direction"</span><span class="p">:</span><span class="s2">"lend"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444280237.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_live"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"is_cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"remaining_amount"</span><span class="p">:</span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"executed_amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/offers</code></p>

<p><strong>Description</strong></p>

<p>View your active offers.</p>

<p><strong>Response Details</strong></p>

<p>An array of the results of <code class="prettyprint">/offer/status</code> for all your live offers (lending or borrowing).</p>

<h4 id="active-funding-used-in-a-margin-position">Active funding used in a margin position</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/taken_funds"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/taken_funds"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">taken_funds</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">11576737</span><span class="p">,</span><span class="w">
  </span><span class="nt">"position_id"</span><span class="p">:</span><span class="mi">944309</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"9.8874"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"34.24603414"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444280948.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"auto_close"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/taken_funds</code></p>

<p><strong>Description</strong></p>

<p>View your funding currently borrowed and used in a margin position.</p>

<p><strong>Response Details</strong></p>

<p>An array of your active margin funds.</p>

<h4 id="active-funding-not-used-in-a-margin-position">Active funding not used in a margin position</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/unused_taken_funds"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/taken_funds"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">unused_taken_funds</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">11576737</span><span class="p">,</span><span class="w">
  </span><span class="nt">"position_id"</span><span class="p">:</span><span class="mi">944309</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"9.8874"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"34.24603414"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444280948.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"auto_close"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/unused_taken_funds</code></p>

<p><strong>Description</strong></p>

<p>View your funding currently borrowed and not used (available for a new margin position).</p>

<p><strong>Response Details</strong></p>

<p>An array of your active unused margin funds.</p>

<h4 id="total-taken-funds">Total taken funds</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/total_taken_funds"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/total_taken_funds"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">total_taken_funds</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"position_pair"</span><span class="p">:</span><span class="s2">"BTCUSD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_swaps"</span><span class="p">:</span><span class="s2">"34.24603414"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/total_taken_funds</code></p>

<p><strong>Description</strong></p>

<p>View the total of your active funding used in your position(s).</p>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>position_pair</strong></td>
              <td>[string]</td>
              <td>Pair of the position</td>
            </tr>
            <tr>
              <td><strong>total_swaps</strong></td>
              <td>[decimal]</td>
              <td>Sum of the active funding backing this position</td>
            </tr>
            </tbody>
            </table>

<h4 id="close-margin-funding">Close margin funding</h4>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/funding/close"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"swap_id"</span><span class="p">:</span> <span class="mi">11576737</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/funding/close"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">close_funding</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="mi">11576737</span><span class="p">,</span><span class="w">
  </span><span class="nt">"position_id"</span><span class="p">:</span><span class="mi">944309</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rate"</span><span class="p">:</span><span class="s2">"9.8874"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"period"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"34.24603414"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="s2">"1444280948.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"auto_close"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/funding/close</code></p>

<p><strong>Description</strong></p>

<p>Allow you to close an unused or used taken fund</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
              <tr>
                <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
                <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>swap_id</strong></td>
              <td>[int]</td>
              <td>The ID given by `/taken_funds` or `/unused_taken_funds`.</td>
            </tr>
            </tbody>
            </table>

<p><strong>Response Details</strong></p>

<p>Status of the margin funding contract. Closed if it could be closed.</p>

<h3 id="wallet-balances">Wallet Balances</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/balances"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/balances"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">balances</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"0.0"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"1.0"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"exchange"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"trading"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">},{</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"trading"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"currency"</span><span class="p">:</span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"available"</span><span class="p">:</span><span class="s2">"1"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/balances</code></p>

<p><strong>Description</strong></p>

<p>See your balances.</p>

<p><strong>Response Details</strong></p>

<p>An array of wallet balances</p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>type</strong></td>
            <td>[string]</td>
            <td>&ldquo;trading&rdquo;, &ldquo;deposit&rdquo; or &ldquo;exchange&rdquo;.</td>
          </tr>
          <tr>
            <td><strong>currency</strong></td>
            <td>[string]</td>
            <td>Currency </td>
          </tr>
          <tr>
            <td><strong>amount</strong></td>
            <td>[decimal]</td>
            <td>How much balance of this currency in this wallet</td>
          </tr>
          <tr>
            <td><strong>available</strong></td>
            <td>[decimal]</td>
            <td>How much X there is in this wallet that is available to trade.</td>
          </tr>
          </tbody>
          </table>

<h3 id="margin-information">Margin Information</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/margin_infos"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/margin_infos"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">margin_infos</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"margin_balance"</span><span class="p">:</span><span class="s2">"14.80039951"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"tradable_balance"</span><span class="p">:</span><span class="s2">"-12.50620089"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"unrealized_pl"</span><span class="p">:</span><span class="s2">"-0.18392"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"unrealized_swap"</span><span class="p">:</span><span class="s2">"-0.00038653"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"net_value"</span><span class="p">:</span><span class="s2">"14.61609298"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"required_margin"</span><span class="p">:</span><span class="s2">"7.3569"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"leverage"</span><span class="p">:</span><span class="s2">"2.5"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"margin_requirement"</span><span class="p">:</span><span class="s2">"13.0"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"margin_limits"</span><span class="p">:[{</span><span class="w">
    </span><span class="nt">"on_pair"</span><span class="p">:</span><span class="s2">"BTCUSD"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"initial_margin"</span><span class="p">:</span><span class="s2">"30.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"margin_requirement"</span><span class="p">:</span><span class="s2">"15.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"tradable_balance"</span><span class="p">:</span><span class="s2">"-0.329243259666666667"</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Margin requirement, leverage and tradable balance are now per pair. You will find them under margin_limits, for each pair. Please update your code as soon as possible."</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/margin_infos</code></p>

<p><strong>Description</strong></p>

<p>See your trading wallet information for margin trading.</p>

<p><strong>Response Details</strong></p>

<table class="striped">
          <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
          </thead>
          <tbody>

          <tr>
            <td><strong>margin_balance</strong></td>
            <td>[decimal]</td>
            <td>the USD value of all your trading assets (based on last prices)</td>
          </tr>
          <tr>
            <td><strong>unrealized_pl</strong></td>
            <td>[decimal]</td>
            <td>The unrealized profit/loss of all your open positions</td>
          </tr>
          <tr>
            <td><strong>unrealized_swap</strong></td>
            <td>[decimal]</td>
            <td>The margin funding used by all your open positions</td>
          </tr>
          <tr>
            <td><strong>net_value</strong></td>
            <td>[decimal]</td>
            <td>Your net value (the USD value of your trading wallet, including your margin balance, your unrealized P/L and margin funding)</td>
          </tr>
          <tr>
            <td><strong>required_margin</strong></td>
            <td>[decimal]</td>
            <td>The minimum net value to maintain in your trading wallet, under which all of your positions are fully liquidated</td>
          </tr>
          <tr>
            <td><strong>margin_limits</strong></td>
            <td>[array]</td>
            <td>The list of margin limits for each pair. The array gives you the following information, for each pair:</td>
          </tr>
          <tr>
            <td><strong>on_pair</strong></td>
            <td>[string]</td>
            <td>The pair for which these limits are valid</td>
          </tr>
          <tr>
            <td><strong>initial_margin</strong></td>
            <td>[decimal]</td>
            <td>The minimum margin (in %) to maintain to open or increase a position</td>
          </tr>
          <tr>
            <td><strong>tradable_balance</strong></td>
            <td>[decimal]</td>
            <td>Your tradable balance in USD (the maximum size you can open on leverage for this pair)</td>
          </tr>
          <tr>
            <td><strong>margin_requirements</strong></td>
            <td>[decimal]</td>
            <td>The maintenance margin (% of the USD value of all of your open positions in the current pair to maintain)</td>
          </tr>

          </tbody>
          </table>

<h3 id="transfer-between-wallets">Transfer Between Wallets</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/transfer"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"1.0"</span><span class="p">,</span>
  <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="s2">"walletfrom"</span><span class="p">:</span> <span class="s2">"exchange"</span><span class="p">,</span>
  <span class="s2">"walletto"</span><span class="p">:</span> <span class="s2">"deposit"</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/transfer"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">transfer</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">'btc'</span><span class="p">,</span> <span class="s2">"exchange"</span><span class="p">,</span> <span class="s2">"deposit"</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="s2">"1.0 USD transfered from Exchange to Deposit"</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/transfer</code></p>

<p><strong>Description</strong></p>

<p>Allow you to move available balances between your wallets.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>amount</strong></td>
              <td>[decimal]</td>
              <td>Amount to transfer.</td>
            </tr>
            <tr>
              <td><strong>currency</strong></td>
              <td>[string]</td>
              <td>Currency of funds to transfer.</td>
            </tr>
            <tr>
              <td><strong>walletfrom</strong></td>
              <td>[string]</td>
              <td>Wallet to transfer from.</td>
            </tr>
            <tr>
              <td><strong>walletto</strong></td>
              <td>[string]</td>
              <td>Wallet to transfer to.</td>
            </tr>
            </tbody>
          </table>

<p><strong>Response Details</strong></p>

<table class="striped">
            <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>status</strong></td>
              <td>[string]</td>
              <td>&ldquo;success&rdquo; or &ldquo;error&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>message</strong></td>
              <td>[string]</td>
              <td>Success or error message</td>
            </tr>
            </tbody>
          </table>

<h3 id="withdrawal">Withdrawal</h3>
<pre class="highlight javascript"><code><span class="c1">// request</span>
<span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/withdraw"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">(),</span>
  <span class="s2">"amount"</span><span class="p">:</span> <span class="s2">"0.01"</span><span class="p">,</span>
  <span class="s2">"withdraw_type"</span><span class="p">:</span> <span class="s2">"bitcoin"</span><span class="p">,</span>
  <span class="s2">"walletselected"</span><span class="p">:</span> <span class="s2">"exchange"</span><span class="p">,</span>
  <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"1DKwqRhDmVyHJDL4FUYpDmQMYA3Rsxtvur"</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/withdraw"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">},</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">withdraw</span><span class="p">(</span><span class="s2">"bitcoin"</span><span class="p">,</span><span class="s2">"deposit"</span><span class="p">,</span><span class="mi">1000</span><span class="p">,</span> <span class="ss">address: </span><span class="s2">"1DKwqRhDmVyHJDL4FUYpDmQMYA3Rsxtvur"</span><span class="p">)</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">[{</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"message"</span><span class="p">:</span><span class="s2">"Your withdrawal request has been successfully submitted."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"withdrawal_id"</span><span class="p">:</span><span class="mi">586829</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/withdraw</code></p>

<p><strong>Description</strong></p>

<p>Allow you to request a withdrawal from one of your wallet.</p>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>withdraw_type</strong></td>
              <td>[string]</td>
              <td>can be &ldquo;bitcoin&rdquo;, &ldquo;litecoin&rdquo; or &ldquo;ethereum&rdquo;  or &ldquo;tether&rdquo; or &ldquo;wire&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>walletselected</strong></td>
              <td>[string]</td>
              <td>The wallet to withdraw from, can be &ldquo;trading&rdquo;, &ldquo;exchange&rdquo;, or &ldquo;deposit&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>amount</strong></td>
              <td>[string]</td>
              <td>Amount to withdraw.</td>
            </tr>
            <tr>
              <td colspan="3"><strong>For cryptocurrencies withdrawals (including &ldquo;tether&rdquo;)</strong></td>
            </tr>
            <tr>
              <td><strong>address</strong></td>
              <td>[string]</td>
              <td>Destination address for withdrawal.</td>
            </tr>
            <tr>
              <td colspan="3"><strong>For wire withdrawals</strong></td>
            </tr>
            <tr>
              <td><strong>expressWire</strong></td>
              <td>[int]</td>
              <td>Optional. &ldquo;1&rdquo; to submit an express wire withdrawal, &ldquo;0&rdquo; or omit for a normal withdrawal</td>
            </tr>
            <tr>
              <td><strong>account_name</strong></td>
              <td>[string]</td>
              <td>Account name</td>
            </tr>
            <tr>
              <td><strong>account_number</strong></td>
              <td>[string]</td>
              <td>Account number</td>
            </tr>
            <tr>
              <td><strong>bank_name</strong></td>
              <td>[string]</td>
              <td>Bank name</td>
            </tr>
            <tr>
              <td><strong>bank_address</strong></td>
              <td>[string]</td>
              <td>Bank address</td>
            </tr>
            <tr>
              <td><strong>bank_city</strong></td>
              <td>[string]</td>
              <td>Bank city</td>
            </tr>
            <tr>
              <td><strong>bank_country</strong></td>
              <td>[string]</td>
              <td>Bank country</td>
            </tr>
            <tr>
              <td><strong>detail_payment</strong></td>
              <td>[string]</td>
              <td>Optional. Message to beneficiary</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_name</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank name</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_address</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank address</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_city</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank city</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_country</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank country</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_account</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank account</td>
            </tr>
            <tr>
              <td><strong>intermediary_bank_swift</strong></td>
              <td>[string]</td>
              <td>Optional. Intermediary bank SWIFT</td>
            </tr>
            </tbody>
          </table>

<p><strong>Request Details</strong></p>

<table class="striped">
            <thead>
            <tr>
              <th class="sortable">Key<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Type<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
              <th class="sortable">Description<i class="fa fa-sort-down"></i><i class="fa fa-sort-up"></i></th>
            </tr>
            </thead>
            <tbody>

            <tr>
              <td><strong>status</strong></td>
              <td>[string]</td>
              <td>&ldquo;success&rdquo; or &ldquo;error&rdquo;.</td>
            </tr>
            <tr>
              <td><strong>message</strong></td>
              <td>[string]</td>
              <td>Success or error message</td>
            </tr>
            <tr>
              <td><strong>withdrawal_id</strong></td>
              <td>[int]</td>
              <td>ID of the withdrawal (0 if unsuccessful)</td>
            </tr>
            </tbody>
          </table>

<h3 id="key-permissions">Key Permissions</h3>

<blockquote>
<p><strong>Request</strong></p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">payload</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"request"</span><span class="p">:</span> <span class="s2">"/v1/key_info"</span><span class="p">,</span>
  <span class="s2">"nonce"</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">toString</span><span class="p">()</span>
<span class="p">};</span>
<span class="nx">payload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Buffer</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">payload</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'base64'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s2">"/key_info"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'X-BFX-PAYLOAD'</span><span class="p">:</span> <span class="nx">payload</span><span class="p">,</span>
    <span class="s1">'X-BFX-SIGNATURE'</span><span class="p">:</span> <span class="nx">signature</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">baseRequest</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">key_info</span>
</code></pre>

<blockquote>
<p><strong>Response</strong></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
</span><span class="nt">"account"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"history"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"orders"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"positions"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"funding"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"wallets"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nt">"withdraw"</span><span class="p">:{</span><span class="w">
</span><span class="nt">"read"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
</span><span class="nt">"write"</span><span class="p">:</span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><strong>Endpoint</strong></p>

<p><code class="prettyprint">/key_info</code></p>

<p><strong>Description</strong></p>

<p>Check the permissions of the key being used to generate this request</p>

<p><strong>Request Details</strong></p>

<p>No additional params</p>

<p><strong>Response Details</strong></p>

<p>A JSON object with a key for each of the possible permissions whose value is another JSON object with both a read and write key which has a value of true or false</p>

          <h1 id="websocket">Websocket</h1>

<h2 id="general">General</h2>

<h3 id="current-version">Current Version</h3>

<p>Bitfinex Websocket API current version is 1.1</p>

<h3 id="changelog">Changelog</h3>

<h4 id="v1-2-dev">v1.2 (dev)</h4>

<ul>
<li>priv channel: rename <code class="prettyprint">ts</code> tag to <code class="prettyprint">hts</code></li>
<li>priv channel: add clientOrderId, groupId, trailing price and flags to <code class="prettyprint">os</code>, <code class="prettyprint">on</code>, <code class="prettyprint">ou</code>, <code class="prettyprint">oc</code> subchannels</li>
<li>priv channel: <code class="prettyprint">calc</code> option: tradable balance, usd equivalent balance, unrealized P&amp;L, swap, &hellip;</li>
<li>priv channel: notification subchannel <code class="prettyprint">n</code></li>
<li>priv channel: fixed heartbeat frequency (1 every second)</li>
<li>book: improved book updates after trades </li>
<li>general: performance improvements</li>
<li>general: support for decimal numbers format (string or float)</li>
</ul>

<h4 id="v1-1">v1.1</h4>

<ul>
<li>related blog post http://blog.bitfinex.com/post/143259611674/websocket-api-v11-update</li>
<li>priv channel (trade snapshot <code class="prettyprint">ts</code>): include last 30 trades from each pair, as opposed to the last 30 trades total in v1.0.</li>
<li>priv channel: publish a full snapshot after a trading engine resync message</li>
<li>performance: noticeable latency reduction</li>
<li>bugfixes</li>
</ul>

<h4 id="v1-0-initial-release">v1.0 Initial Release</h4>

<h3 id="ssl-websocket-connection">SSL Websocket Connection</h3>

<p>URI: <code class="prettyprint">wss://api2.bitfinex.com:3000/ws</code></p>

<h3 id="message-encoding">Message encoding</h3>

<p>Each message sent and received via the Bitfinex&rsquo;s websocket channel is encoded in JSON format</p>

<h3 id="supported-pairs">Supported Pairs</h3>

<p>BTCUSD, LTCUSD, LTCBTC, ETHUSD, ETHBTC</p>

<h3 id="public-channels">Public Channels</h3>

<ul>
<li><strong>Book:</strong> order book feed</li>
<li><strong>Ticker:</strong> ticker feed</li>
<li><strong>Trades:</strong> trades feed</li>
</ul>

<h3 id="authenticated-channels">Authenticated Channels</h3>

<ul>
<li><strong>Account Information:</strong> account specific private data (positions, orders, executed trades, balances)</li>
</ul>

<h3 id="how-to-connect">How to Connect</h3>

<p>Open up a websocket connection to the websocket URI.</p>
<pre class="highlight javascript"><code><span class="c1">//using the ws library</span>
<span class="kd">var</span> <span class="nx">WebSocket</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ws'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="s2">"wss://api2.bitfinex.com:3000/ws"</span><span class="p">);</span>
<span class="nx">w</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
<pre class="highlight go"><code><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"code.google.com/p/go.net/websocket"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="n">ws</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">websocket</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"wss://api2.bitfinex.com:3000/ws"</span><span class="p">,</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x"> </span><span class="s">"http://localhost/"</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<h3 id="error-codes">Error Codes</h3>

<p>In case of error, you receive a message containing the proper error code (<code class="prettyprint">code</code> JSON field).</p>

<aside class="warning">
<strong>Generic Error Codes</strong>
<br>
10000 : Unknown event
<br>
10001 : Unknown pair
</aside>

<h3 id="info-messages">Info Messages</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"info"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Info messages are sent from the websocket server to notify the state of your connection.
Right after connecting you receive an info message that contains the actual version of the websocket stream.</p>

<aside class="notice">
<strong>NOTE</strong>
If you are developing/using a trading bot, please make sure to handle version number changes.
</aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"info"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;CODE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;MSG&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Websocket server sends other <code class="prettyprint">info</code> messages to inform regarding relevant events.</p>

<aside class="warning">
<strong>info codes</strong>
<br>
20051 : Stop/Restart Websocket Server (please try to reconnect)
<br>
20060 : Refreshing data from the Trading Engine. Please pause any activity and resume after receiving the `info` message `20061` (it should take 10 seconds at most).
<br>
20061 : Done Refreshing data from the Trading Engine. You can resume normal activity. It is advised to unsubscribe/subscribe again all channels.
<br>
</aside>

<aside class="notice">
<strong>NOTE</strong>
Rely on `CODE` only to handle `info` events.
</aside>

<h3 id="ping-pong">Ping/Pong</h3>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"ping"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"pong"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Use <code class="prettyprint">ping</code> message to test your connection to the websocket server.</p>

<h3 id="subscribe-to-channels">Subscribe to Channels</h3>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"CHANNEL_NAME"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribed"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"CHANNEL_NAME"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response-failure</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"msg"</span><span class="p">:</span><span class="s2">"&lt;ERROR_MSG&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"&lt;ERROR_CODE&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To receive data from a channel you have to send a &ldquo;subscribe&rdquo; message first.</p>

<h3 id="heartbeating">Heartbeating</h3>
<pre class="highlight json"><code><span class="p">[</span><span class="s2">"&lt;Chan Id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"hb"</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>If there is no new message in the channel for 1 second, Websocket server will send you an heartbeat message in this format.</p>

<h3 id="snapshot">Snapshot</h3>
<pre class="highlight json"><code><span class="p">[</span><span class="s2">"&lt;Chan Id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="p">[</span><span class="s2">"&lt;Group of Update Messages&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="s2">"&lt;Update Message&gt;"</span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Upon subscribing to a channel an initial snapshot is sent. Typically,
the snapshot will have as its first item, the chanId, its second item
will be an array of update messages (each of which is itself an array).
So The array would have 3 levels.</p>

<h3 id="update">Update</h3>

<p>After receiving the snapshot, you will receive updates upon any change.</p>

<aside class="notice">
Channel ID&rsquo;s allow you to keep track of the messages, they are static per session, you will receive both the CHANNEL_NAME and the CHANNEL_ID in the response to a subscription message.
<ul>
<li>CHANNEL_NAME: (string) channel name (book, trades, ticker)</li>
<li>CHANNEL_ID: (int) channel identifier. CHANNEL_ID is a numeric channel identifier that the developer can use to distinguish between updates for each subscribed channel.</li>
</ul>
</aside>

<aside class="warning">
<strong>Error Codes</strong>
<br>
10300 : Subscription failed (generic)
<br>
10301 : Already subscribed
<br>
10302 : Unknown channel
<br>
</aside>

<h3 id="unsubscribe-to-channels">Unsubscribe to Channels</h3>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"unsubscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"unsubscribed"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response-failure</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"msg"</span><span class="p">:</span><span class="s2">"&lt;ERROR_MSG&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"&lt;ERROR_CODE&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To stop receiving data from a channel you have to send a &ldquo;unsubscribe&rdquo; message.</p>

<aside class="warning">
<strong>Error Codes</strong>
<br>
10400 : Subscription failed (generic)
<br>
10401 : Not subscribed
</aside>

<h2 id="public-channels">Public Channels</h2>

<h3 id="order-books">Order Books</h3>
<pre class="highlight javascript"><code><span class="nx">w</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"subscribe"</span><span class="p">,</span>
    <span class="s2">"channel"</span><span class="p">:</span> <span class="s2">"book"</span><span class="p">,</span>
    <span class="s2">"pair"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
    <span class="s2">"prec"</span><span class="p">:</span> <span class="s2">"P0"</span><span class="p">,</span>
    <span class="s2">"len"</span><span class="p">:</span><span class="s2">"&lt;LENGTH&gt;"</span>
<span class="p">}))</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"book"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"&lt;PAIR&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"prec"</span><span class="p">:</span><span class="s2">"&lt;PRECISION&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"freq"</span><span class="p">:</span><span class="s2">"&lt;FREQUENCY&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribed"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"book"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"&lt;PAIR&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"prec"</span><span class="p">:</span><span class="s2">"&lt;PRECISION&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"freq"</span><span class="p">:</span><span class="s2">"&lt;FREQUENCY&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"len"</span><span class="p">:</span><span class="s2">"&lt;LENGTH&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The Order Books channel allow you to keep track of the state of the Bitfinex order book.
It is provided on a price aggregated basis, with customizable precision.
After receiving the response, you will receive a snapshot of the book,
followed by updates upon any changes to the book.</p>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">snapshot</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;COUNT&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">updates</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;COUNT&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PRECISION</td>
<td>string</td>
<td>Level of price aggregation (P0, P1, P2, P3).<br>The default is P0.</td>
</tr>
<tr>
<td>FREQUENCY</td>
<td>string</td>
<td>Frequency of updates (F0, F1, F2, F3).<br>F0=realtime / F1=2sec / F2=5sec / F3=10sec.</td>
</tr>
<tr>
<td>PRICE</td>
<td>float</td>
<td>Price level.</td>
</tr>
<tr>
<td>COUNT</td>
<td>int</td>
<td>Number of orders at that price level.</td>
</tr>
<tr>
<td>±AMOUNT</td>
<td>float</td>
<td>Total amount available at that price level.<br>Positive values mean bid, negative values mean ask.</td>
</tr>
<tr>
<td>LENGTH</td>
<td>string</td>
<td>Number of price points (&ldquo;25&rdquo;, &ldquo;100&rdquo;) [default=&ldquo;25&rdquo;]</td>
</tr>
</tbody></table>

<p><strong>Precision Levels per Pair</strong></p>

<table><thead>
<tr>
<th>Pair</th>
<th>Precision Level</th>
<th>Number of decimal places</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>BTCUSD</td>
<td>P0</td>
<td>2</td>
<td>$0.01</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P1</td>
<td>1</td>
<td>$0.10</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P2</td>
<td>0</td>
<td>$1</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P3</td>
<td>-1</td>
<td>$10</td>
</tr>
<tr>
<td>LTCUSD</td>
<td>P0</td>
<td>4</td>
<td>$0.0001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P1</td>
<td>3</td>
<td>$0.001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P2</td>
<td>2</td>
<td>$0.01</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P3</td>
<td>1</td>
<td>$0.1</td>
</tr>
<tr>
<td>LTCBTC</td>
<td>P0</td>
<td>6</td>
<td>฿0.000001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P1</td>
<td>5</td>
<td>฿0.00001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P2</td>
<td>4</td>
<td>฿0.0001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P3</td>
<td>3</td>
<td>฿0.001</td>
</tr>
<tr>
<td>ETHUSD</td>
<td>P0</td>
<td>4</td>
<td>$0.0001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P1</td>
<td>3</td>
<td>$0.001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P2</td>
<td>2</td>
<td>$0.01</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P3</td>
<td>1</td>
<td>$0.1</td>
</tr>
<tr>
<td>ETHBTC</td>
<td>P0</td>
<td>6</td>
<td>฿0.000001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P1</td>
<td>5</td>
<td>฿0.00001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P2</td>
<td>4</td>
<td>฿0.0001</td>
</tr>
<tr>
<td>&hellip;</td>
<td>P3</td>
<td>3</td>
<td>฿0.001</td>
</tr>
</tbody></table>

<aside class="warning">
<strong>Error Codes</strong>
<br>
10011 : Unknown Book precision
<br>
10012 : Unknown Book length
</aside>

<aside class="notice">
<strong>NOTE</strong>
COUNT=0 means that you have to remove the price level from your book. 
</aside>

<h3 id="raw-order-books">Raw Order Books</h3>

<p>These are the most granular books.</p>
<pre class="highlight javascript"><code><span class="nx">w</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"subscribe"</span><span class="p">,</span>
    <span class="s2">"channel"</span><span class="p">:</span> <span class="s2">"book"</span><span class="p">,</span>
    <span class="s2">"pair"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span><span class="p">,</span>
    <span class="s2">"prec"</span><span class="p">:</span> <span class="s2">"R0"</span><span class="p">,</span>
    <span class="s2">"len"</span><span class="p">:</span><span class="s2">"&lt;LENGTH&gt;"</span>
<span class="p">}))</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"book"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"&lt;PAIR&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"prec"</span><span class="p">:</span><span class="s2">"R0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribed"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"book"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"&lt;PAIR&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"prec"</span><span class="p">:</span><span class="s2">"R0"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"len"</span><span class="p">:</span><span class="s2">"&lt;LENGTH&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">snapshot</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;ORD_ID&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">updates</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ORD_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<aside class="notice">
<strong>NOTE</strong>
PRICE=0 means that you have to remove the order from your book. 
</aside>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PRECISION</td>
<td>string</td>
<td>Aggregation level (R0).</td>
</tr>
<tr>
<td>ORD_ID</td>
<td>int</td>
<td>Order id.</td>
</tr>
<tr>
<td>ORD_PRICE</td>
<td>float</td>
<td>Order price.</td>
</tr>
<tr>
<td>±AMOUNT</td>
<td>float</td>
<td>Total amount available at that price level.<br>Positive values mean bid, negative values mean ask.</td>
</tr>
<tr>
<td>LENGTH</td>
<td>string</td>
<td>Number of price points (&ldquo;25&rdquo;</td>
</tr>
</tbody></table>

<h3 id="trades">Trades</h3>

<p>This channel sends a trade message whenever a trade occurs at Bitfinex.
It includes all the pertinent details of the trade,
such as price, size and time.</p>
<pre class="highlight javascript"><code><span class="nx">w</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"subscribe"</span><span class="p">,</span>
    <span class="s2">"channel"</span><span class="p">:</span> <span class="s2">"trades"</span><span class="p">,</span>
    <span class="s2">"pair"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span>
<span class="p">}))</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trades"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pair"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTCUSD"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribed"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trades"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"chanId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"&lt;PAIR&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">snapshot</span><span class="w">
</span><span class="p">[</span><span class="w">  
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">  
      </span><span class="p">[</span><span class="w">  
         </span><span class="s2">"&lt;SEQ&gt; OR &lt;ID&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">  
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">updates</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"te"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;SEQ&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"tu"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;SEQ&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;AMOUNT&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><em>here is an example of a real trade</em></p>

<p><code class="prettyprint">[ 5, &#39;te&#39;, &#39;1234-BTCUSD&#39;, 1443659698, 236.42, 0.49064538 ]</code></p>

<p><code class="prettyprint">[ 5, &#39;tu&#39;, &#39;1234-BTCUSD&#39;, 15254529, 1443659698, 236.42, 0.49064538 ]</code></p>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>SEQ</td>
<td>string</td>
<td>Trade sequence id</td>
</tr>
<tr>
<td>ID</td>
<td>int</td>
<td>Trade database id</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>int</td>
<td>Unix timestamp of the trade.</td>
</tr>
<tr>
<td>PRICE</td>
<td>float</td>
<td>Price at which the trade was executed</td>
</tr>
<tr>
<td>±AMOUNT</td>
<td>float</td>
<td>How much was bought (positive) or sold (negative).<br>The order that causes the trade determines if it is a buy or a sell.</td>
</tr>
</tbody></table>

<aside class="notice">
<strong>NOTE</strong>
SEQ is different from canonical ID. Websocket server uses SEQ strings to push trades with low latency. 
After a &ldquo;te&rdquo; message you receive shortly a &ldquo;tu&rdquo; message that contains the real trade &ldquo;ID&rdquo;.
</aside>

<h3 id="ticker">Ticker</h3>

<p>The ticker is a high level overview of the state of the market.
It shows you the current best bid and ask, as well as the last trade
price. It also includes information such as daily volume and how
much the price has moved over the last day.</p>
<pre class="highlight javascript"><code><span class="nx">w</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="s2">"event"</span><span class="p">:</span> <span class="s2">"subscribe"</span><span class="p">,</span>
    <span class="s2">"channel"</span><span class="p">:</span> <span class="s2">"ticker"</span><span class="p">,</span>
    <span class="s2">"pair"</span><span class="p">:</span> <span class="s2">"BTCUSD"</span>
<span class="p">}))</span>
</code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"ticker"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"BTCUSD"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"subscribed"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"channel"</span><span class="p">:</span><span class="s2">"ticker"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"pair"</span><span class="p">:</span><span class="s2">"BTCUSD"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">snapshot</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;BID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;BID_SIZE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ASK&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ASK_SIZE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;DAILY_CHANGE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;DAILY_CHANGE_PERC&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;LAST_PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;VOLUME&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;HIGH&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;LOW&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">updates</span><span class="w">
</span><span class="p">[</span><span class="w">
   </span><span class="s2">"&lt;CHANNEL_ID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;BID&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;BID_SIZE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ASK&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;ASK_SIZE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;DAILY_CHANGE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;DAILY_CHANGE_PERC&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;LAST_PRICE&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;VOLUME&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;HIGH&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;LOW&gt;"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><em>Here is an example of a real ticker</em></p>

<p><code class="prettyprint">[ 2, 236.62, 9.0029, 236.88, 7.1138, -1.02, 0, 236.52, 5191.36754297, 250.01, 220.05 ]</code></p>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Fields</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>BID</td>
<td>float</td>
<td>Price of last highest bid</td>
</tr>
<tr>
<td>BID_SIZE</td>
<td>float</td>
<td>Size of the last highest bid</td>
</tr>
<tr>
<td>ASK</td>
<td>float</td>
<td>Price of last lowest ask</td>
</tr>
<tr>
<td>ASK_SIZE</td>
<td>float</td>
<td>Size of the last lowest ask</td>
</tr>
<tr>
<td>DAILY_CHANGE</td>
<td>float</td>
<td>Amount that the last price<br>has changed since yesterday</td>
</tr>
<tr>
<td>DAILY_CHANGE_PERC</td>
<td>float</td>
<td>Amount that the price<br>has changed expressed in percentage terms</td>
</tr>
<tr>
<td>LAST_PRICE</td>
<td>float</td>
<td>Price of the last trade.</td>
</tr>
<tr>
<td>VOLUME</td>
<td>float</td>
<td>Daily volume</td>
</tr>
<tr>
<td>HIGH</td>
<td>float</td>
<td>Daily high</td>
</tr>
<tr>
<td>LOW</td>
<td>float</td>
<td>Daily low</td>
</tr>
</tbody></table>

<h2 id="authenticated-channels">Authenticated Channels</h2>

<h3 id="account-information">Account Information</h3>
<pre class="highlight javascript"><code><span class="kd">var</span>
    <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'crypto'</span><span class="p">),</span>
    <span class="nx">api_key</span> <span class="o">=</span> <span class="s1">'API_KEY'</span><span class="p">,</span>
    <span class="nx">api_secret</span> <span class="o">=</span> <span class="s1">'API_SECRET'</span><span class="p">,</span>
    <span class="nx">payload</span> <span class="o">=</span> <span class="s1">'AUTH'</span> <span class="o">+</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()),</span>
    <span class="nx">signature</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha384"</span><span class="p">,</span> <span class="nx">api_secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">payload</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="nx">w</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="na">event</span><span class="p">:</span> <span class="s2">"auth"</span><span class="p">,</span>
    <span class="na">apiKey</span><span class="p">:</span> <span class="nx">api_key</span><span class="p">,</span>
    <span class="na">authSig</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
    <span class="na">authPayload</span><span class="p">:</span> <span class="nx">payload</span>
<span class="p">}));</span>
</code></pre>
<pre class="highlight go"><code><span class="n">ws</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">websocket</span><span class="o">.</span><span class="n">Dial</span><span class="p">(</span><span class="s">"wss://api2.bitfinex.com:3000/ws"</span><span class="p">,</span><span class="x"> </span><span class="s">""</span><span class="p">,</span><span class="x"> </span><span class="s">"http://localhost/"</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="n">payload</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"AUTH"</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%v"</span><span class="p">,</span><span class="x"> </span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Unix</span><span class="p">())</span><span class="x">

</span><span class="n">sig</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">hmac</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">sha512</span><span class="o">.</span><span class="n">New384</span><span class="p">,</span><span class="x"> </span><span class="p">[]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"API_KEY"</span><span class="p">))</span><span class="x">
</span><span class="n">sig</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span><span class="x">
</span><span class="n">payload_sign</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">hex</span><span class="o">.</span><span class="n">EncodeToString</span><span class="p">(</span><span class="n">sig</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">))</span><span class="x">

</span><span class="n">connectMsg</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{}{</span><span class="x">
    </span><span class="s">"event"</span><span class="o">:</span><span class="x">       </span><span class="s">"auth"</span><span class="p">,</span><span class="x">
    </span><span class="s">"apiKey"</span><span class="o">:</span><span class="x">      </span><span class="s">"API_KEY"</span><span class="p">,</span><span class="x">
    </span><span class="s">"authSig"</span><span class="o">:</span><span class="x">     </span><span class="n">payload_sign</span><span class="p">,</span><span class="x">
    </span><span class="s">"authPayload"</span><span class="o">:</span><span class="x"> </span><span class="n">payload</span><span class="p">,</span><span class="x">
</span><span class="p">})</span><span class="x">

</span><span class="c">// Send auth message</span><span class="x">
</span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">ws</span><span class="o">.</span><span class="n">Write</span><span class="p">(</span><span class="n">connectMsg</span><span class="p">)</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="k">return</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="c">// Read all incoming messages</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">msg</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="k">for</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">websocket</span><span class="o">.</span><span class="n">Message</span><span class="o">.</span><span class="n">Receive</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span></code></pre>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">  
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"userId"</span><span class="p">:</span><span class="s2">"&lt;USER_ID&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">  
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"userId"</span><span class="p">:</span><span class="s2">"&lt;USER_ID&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response-failure</span><span class="w">
</span><span class="p">{</span><span class="w">  
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"FAIL"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"&lt;ERROR_CODE&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This channel allows you to keep up to date with the status of
your account. You can receive updates on your positions,
your balances, your orders and your trades.</p>

<p>Account info always uses chanId 0.</p>

<aside class="notice">
<strong>AUTH request message: authenticate for the private data stream</strong>
<ul><li>API_KEY: (string) Bitfinex&rsquo;s api key</li>
<li>AUTH_SIGNATURE: (string) HMAC-sha384 signature</li></ul>
</aside>

<h4 id="position-snapshot">Position Snapshot</h4>

<p><strong>Fields</strong></p>
<pre class="highlight json"><code><span class="p">[</span><span class="w">  
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"ps"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">  
      </span><span class="p">[</span><span class="w">  
         </span><span class="s2">"&lt;POS_PAIR&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;POS_STATUS&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;POS_AMOUNT&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;POS_BASE_PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;POS_MARGIN_FUNDING&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;POS_MARGIN_FUNDING_TYPE&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">  
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Term</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>POS_PAIR</td>
<td>string</td>
<td>Pair (BTCUSD, &hellip;).</td>
</tr>
<tr>
<td>POS_STATUS</td>
<td>string</td>
<td>Status (ACTIVE, CLOSED).</td>
</tr>
<tr>
<td>±POS_AMOUNT</td>
<td>float</td>
<td>Size of the position.<br>Positive values means a long position,<br>negative values means a short position.</td>
</tr>
<tr>
<td>POS_BASE_PRICE</td>
<td>float</td>
<td>The price at which you entered your position.</td>
</tr>
<tr>
<td>POS_MARGIN_FUNDING</td>
<td>float</td>
<td>The amount of funding being used for this position.</td>
</tr>
<tr>
<td>POS_MARGIN_FUNDING_TYPE</td>
<td>int</td>
<td>0 for daily, 1 for term.</td>
</tr>
</tbody></table>

<h4 id="wallet-snapshot">Wallet Snapshot</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"ws"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;WLT_NAME&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;WLT_CURRENCY&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;WLT_BALANCE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;WLT_INTEREST_UNSETTLED&gt;"</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Term</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>WLT_NAME</td>
<td>string</td>
<td>Wallet name (exchange, trading, deposit)</td>
</tr>
<tr>
<td>WLT_BALANCE</td>
<td>float</td>
<td>Wallet balance</td>
</tr>
<tr>
<td>WLT_INTEREST_UNSETTLED</td>
<td>float</td>
<td>Unsettled interest</td>
</tr>
</tbody></table>

<h4 id="order-snapshots">Order Snapshots</h4>

<p><code class="prettyprint">os</code> and <code class="prettyprint">hos</code> indentify respectively <em>active</em> and <em>inactive</em> orders snapshots</p>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"os"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;ORD_ID&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_PAIR&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_AMOUNT&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_AMOUNT_ORIG&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_TYPE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_STATUS&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_PRICE_AVG&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_CREATED_AT&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_NOTIFY&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_HIDDEN&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_OCO&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Term</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ORD_ID</td>
<td>int</td>
<td>order id</td>
</tr>
<tr>
<td>ORD_PAIR</td>
<td>string</td>
<td>Pair (BTCUSD, &hellip;)</td>
</tr>
<tr>
<td>±ORD_AMOUNT</td>
<td>float</td>
<td>Positive means buy, negative means sell.</td>
</tr>
<tr>
<td>±ORD_AMOUNT_ORIG</td>
<td>float</td>
<td>Original amount</td>
</tr>
<tr>
<td>ORD_TYPE</td>
<td>string</td>
<td>The type of the order<br>[&ldquo;LIMIT&rdquo;, &ldquo;MARKET&rdquo;, &ldquo;STOP&rdquo;, &ldquo;TRAILING STOP&rdquo;, &ldquo;EXCHANGE MARKET&rdquo;, &ldquo;EXCHANGE LIMIT&rdquo;, &ldquo;EXCHANGE STOP&rdquo;, &ldquo;EXCHANGE TRAILING STOP&rdquo;, &ldquo;FOK&rdquo;, &ldquo;EXCHANGE FOK”].</td>
</tr>
<tr>
<td>ORD_STATUS</td>
<td>string</td>
<td>Status [ACTIVE, EXECUTED, PARTIALLY FILLED, CANCELED]</td>
</tr>
<tr>
<td>ORD_PRICE</td>
<td>float</td>
<td>Price</td>
</tr>
<tr>
<td>ORD_PRICE_AVG</td>
<td>float</td>
<td>Average price</td>
</tr>
<tr>
<td>ORD_CREATED_AT</td>
<td>string</td>
<td>Creation date/time</td>
</tr>
<tr>
<td>ORD_NOTIFY</td>
<td>int</td>
<td>1 if Notify flag is active, 0 if not</td>
</tr>
<tr>
<td>ORD_HIDDEN</td>
<td>int</td>
<td>1 if Hidden, 0 if not hidden</td>
</tr>
<tr>
<td>ORD_OCO</td>
<td>int</td>
<td>ID of the linked order, 0 otherwise</td>
</tr>
</tbody></table>

<h4 id="trade-snapshot">Trade Snapshot</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"ts"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"&lt;TRD_ID&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TRD_PAIR&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TRD_TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TRD_ORD_ID&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TRD_AMOUNT_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;TRD_PRICE_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_TYPE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;FEE&gt;"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"&lt;FEE_CURRENCY&gt;"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
         </span><span class="s2">"..."</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Fields</strong></p>

<table><thead>
<tr>
<th>Term</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>TRD_ID</td>
<td>int</td>
<td>Trade database id</td>
</tr>
<tr>
<td>TRD_PAIR</td>
<td>string</td>
<td>Pair (BTCUSD, &hellip;)</td>
</tr>
<tr>
<td>TRD_TIMESTAMP</td>
<td>int</td>
<td>Execution timestamp</td>
</tr>
<tr>
<td>TRD_ORD_ID</td>
<td>int</td>
<td>Order id</td>
</tr>
<tr>
<td>±TRD_AMOUNT_EXECUTED</td>
<td>float</td>
<td>Positive means buy, negative means sell</td>
</tr>
<tr>
<td>TRD_PRICE_EXECUTED</td>
<td>float</td>
<td>Execution price</td>
</tr>
<tr>
<td>ORD_TYPE</td>
<td>string</td>
<td>Order type</td>
</tr>
<tr>
<td>ORD_PRICE</td>
<td>float</td>
<td>Order price</td>
</tr>
<tr>
<td>FEE</td>
<td>float</td>
<td>Fee</td>
</tr>
<tr>
<td>FE_CURRENCY</td>
<td>string</td>
<td>Fee currency</td>
</tr>
</tbody></table>

<h4 id="order-updates">Order Updates</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;on|ou|oc&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="s2">"&lt;ORD_ID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_PAIR&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_AMOUNT&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_AMOUNT_ORIG&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_STATUS&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_PRICE_AVG&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_CREATED_AT&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_NOTIFY&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_HIDDEN&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_OCO&gt;"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h4 id="position-updates">Position Updates</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">  
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"&lt;pn|pu|pc&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">  
      </span><span class="s2">"&lt;POS_PAIR&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;POS_STATUS&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;POS_AMOUNT&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;POS_BASE_PRICE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;POS_MARGIN_FUNDING&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;POS_MARGIN_FUNDING_TYPE&gt;"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h4 id="wallet-updates">Wallet Updates</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"wu"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="s2">"&lt;WLT_NAME&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;WLT_CURRENCY&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;WLT_BALANCE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;WLT_INTEREST_UNSETTLED&gt;"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<aside class="notice">
<strong>Limit Order Behavior</strong>
<br>
<ul>
<li>When you place a limit order, you will first receive an ‘on’ (order new) which means that the order has been accepted by the system</li>
<li>When the order rests on the book, you will receive an &lsquo;ou&rsquo; (order update).</li>
<li>If you send a market order, you will only receive the ‘on’ because it won’t actually rest on the book (as it matches the first order it runs into).</li>
</ul>
</aside>

<h4 id="executed-trades">Executed Trades</h4>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"te"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="s2">"&lt;TRD_SEQ&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_PAIR&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_ORD_ID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_AMOUNT_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_PRICE_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>After a <code class="prettyprint">te</code> message you receive shortly a <code class="prettyprint">tu</code> message that contains the real trade id (<code class="prettyprint">TRD_ID</code>) and additional/updated fields.</p>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"tu"</span><span class="p">,</span><span class="w">
   </span><span class="p">[</span><span class="w">
      </span><span class="s2">"&lt;TRD_SEQ&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_ID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_PAIR&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_TIMESTAMP&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_ORD_ID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_AMOUNT_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;TRD_PRICE_EXECUTED&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_TYPE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;ORD_PRICE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;FEE&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"&lt;FEE_CURRENCY&gt;"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p><strong>Abbreviated Terms Glossary</strong></p>

<table><thead>
<tr>
<th>Term</th>
<th>Definition</th>
</tr>
</thead><tbody>
<tr>
<td>ps</td>
<td>position snapshot</td>
</tr>
<tr>
<td>pn</td>
<td>new position</td>
</tr>
<tr>
<td>pu</td>
<td>position update</td>
</tr>
<tr>
<td>pc</td>
<td>position close</td>
</tr>
<tr>
<td>ws</td>
<td>wallet snapshot</td>
</tr>
<tr>
<td>wu</td>
<td>wallet update</td>
</tr>
<tr>
<td>os</td>
<td>order snapshot</td>
</tr>
<tr>
<td>on</td>
<td>new order</td>
</tr>
<tr>
<td>ou</td>
<td>order update</td>
</tr>
<tr>
<td>oc</td>
<td>order cancel</td>
</tr>
<tr>
<td>te</td>
<td>trade executed</td>
</tr>
<tr>
<td>tu</td>
<td>trade execution update</td>
</tr>
</tbody></table>

<aside class="warning">
<strong>Error Codes</strong>
<br>
10100 : Authentication failure (generic)
<br>
10101 : Already authenticated
<br>
10102 : Authentication Payload Error
<br>
10103 : Authentication Signature Error
<br>
10104 : Authentication HMAC Error
</aside>

<h3 id="unauthentication">Unauthentication</h3>
<pre class="highlight json"><code><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w">
</span><span class="p">{</span><span class="w">  
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"unauth"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response</span><span class="w">
</span><span class="p">{</span><span class="w">  
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"unauth"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"OK"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">//</span><span class="w"> </span><span class="err">response-failure</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="nt">"event"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"status"</span><span class="p">:</span><span class="s2">"FAILED"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"chanId"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"&lt;CODE&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="warning">
<strong>Error Codes</strong>
<br>
10201 : Not authenticated
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="go">go</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
